From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: migration-agent <dev@localhost>
Date: Sat, 09 Jan 2026 00:00:00 +0000
Subject: [PATCH] Migration: move React Native / Expo files to PrelimPro-mobile and web files to PrelimPro-web

---
This patch moves files that reference React Native / Expo into PrelimPro-mobile/
and moves web-only platform files into PrelimPro-web/. It contains delete/add
unified diffs with full file contents for review. Do NOT apply automatically.

---

diff --git a/babel.config.js b/PrelimPro-mobile/babel.config.js
deleted file mode 100644
index 1111111..0000000
--- a/babel.config.js
+++ /dev/null
@@ -1,13 +0,0 @@
-module.exports = function(api) {
-  api.cache(true);
-  return {
-    presets: ['babel-preset-expo'],
-    plugins: [
-      '@babel/plugin-proposal-export-namespace-from', // For web support
-      'react-native-worklets/plugin' // Must be last
-    ]
-  };
-};
diff --git a/babel.config.js b/PrelimPro-mobile/babel.config.js
new file mode 100644
index 0000000..2222222
--- /dev/null
+++ b/PrelimPro-mobile/babel.config.js
@@ -0,0 +1,13 @@
module.exports = function(api) {
  api.cache(true);
  return {
    presets: ['babel-preset-expo'],
    plugins: [
      '@babel/plugin-proposal-export-namespace-from', // For web support
      'react-native-worklets/plugin' // Must be last
    ]
  };
};

diff --git a/metro.config.js b/PrelimPro-mobile/metro.config.js
deleted file mode 100644
index 2222222..0000000
--- a/metro.config.js
+++ /dev/null
 @@ -1,31 +0,0 @@
const { getDefaultConfig } = require('expo/metro-config');
const path = require('path');

/** @type {import('expo/metro-config').MetroConfig} */
const config = getDefaultConfig(__dirname);

// Ensure Metro can resolve ESM/mjs files
config.resolver.sourceExts = [...(config.resolver.sourceExts || []), 'mjs'];

// Force Metro to use project-local resolution only
config.resolver.resolverMainFields = ['react-native', 'browser', 'main'];

// Prevent cross-project module resolution
config.resolver.disableHierarchicalLookup = true;

// Add alias for @supabase/node-fetch to prevent dynamic import issues
config.resolver.extraNodeModules = {
  ...config.resolver.extraNodeModules,
  '@supabase/node-fetch': path.resolve(__dirname, 'shims', 'node-fetch.js'),
};

// Clear Metro transform cache on each build
config.resetCache = true;

// Ensure proper module resolution
config.resolver.nodeModulesPaths = [
  path.resolve(__dirname, 'node_modules'),
];

module.exports = config;

diff --git a/app.json b/PrelimPro-mobile/app.json
deleted file mode 100644
index 3333333..0000000
--- a/app.json
+++ /dev/null
 @@ -1,85 +0,0 @@
{
  "expo": {
    "name": "Prelimpro Notice Generator",
    "slug": "notices-contract-projects",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/images/icon.png",
    "scheme": "notices-contract-projects",
    "userInterfaceStyle": "automatic",
    "newArchEnabled": false,
    "ios": {
      "supportsTablet": true,
      "infoPlist": {
        "UIBackgroundModes": [
          "remote-notification"
        ]
      }
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/images/adaptive-icon.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "bundler": "metro",
      "output": "static",
      "favicon": "./assets/images/favicon.png"
    },
    "plugins": [
      "expo-router",
      [
        "expo-splash-screen",
        {
          "image": "./assets/images/splash-icon.png",
          "imageWidth": 200,
          "resizeMode": "contain",
          "backgroundColor": "#ffffff"
        }
      ],
      [
        "expo-notifications",
        {
          "icon": "./assets/images/notification-icon.png",
          "color": "#1E40AF",
          "sounds": [],
          "mode": "production"
        }
      ]
    ],
    "experiments": {
      "typedRoutes": true
    },
    "runtimeVersion": {
      "policy": "sdkVersion"
    }
  }
}

diff --git a/app/_layout.tsx b/PrelimPro-mobile/app/_layout.tsx
deleted file mode 100644
index 5555555..0000000
--- a/app/_layout.tsx
+++ /dev/null
 @@ -1,200 +0,0 @@
import { Stack } from "expo-router";
import { StatusBar } from "expo-status-bar";
import { AuthProvider } from "../contexts/AuthContext";
import { NotificationProvider } from "../contexts/NotificationContext";
import { PlanProvider } from "../contexts/PlanContext";
import { DisclaimerProvider } from "../contexts/DisclaimerContext";
import { colors } from "../constants/theme";

export default function RootLayout() {
  return (
    <AuthProvider>
      <NotificationProvider>
        <PlanProvider>
          <DisclaimerProvider>
            <StatusBar style="dark" />
            <Stack
              screenOptions={{
                headerStyle: {
                  backgroundColor: colors.surface,
                },
                headerTintColor: colors.primary,
                headerTitleStyle: {
                  fontWeight: '600',
                },
                headerShadowVisible: false,
                contentStyle: {
                  backgroundColor: colors.background,
                },
              }}
            >
              <Stack.Screen name="index" options={{ headerShown: false }} />
              <Stack.Screen name="(auth)/login" options={{ headerShown: false }} />
              <Stack.Screen name="(auth)/signup" options={{ headerShown: false }} />
              <Stack.Screen name="(auth)/verify-email" options={{ headerShown: false }} />
              <Stack.Screen name="(auth)/forgot-password" options={{ headerShown: false }} />
              <Stack.Screen 
                name="(app)/dashboard" 
                options={{ 
                  title: 'My Projects',
                  headerShown: false,
                }} 
              />
              <Stack.Screen 
                name="(app)/new-project" 
                options={{ 
                  title: 'New Project',
                  presentation: 'modal',
                }} 
              />
              <Stack.Screen 
                name="(app)/project/[id]" 
                options={{ 
                  title: 'Project Details',
                }} 
              />
              <Stack.Screen 
                name="(app)/disclaimer" 
                options={{ 
                  title: 'Legal Disclaimer',
                  presentation: 'modal',
                  headerShown: false,
                }} 
              />
              <Stack.Screen 
                name="(app)/preview" 
                options={{ 
                  title: 'Notice Preview',
                }} 
              />
              <Stack.Screen 
                name="(app)/delivery" 
                options={{ 
                  title: 'Send Notice',
                }} 
              />
              <Stack.Screen 
                name="(app)/notifications" 
                options={{ 
                  title: 'Notifications',
                }} 
              />
              <Stack.Screen 
                name="(app)/settings" 
                options={{ 
                  title: 'Settings',
                }} 
              />
              <Stack.Screen 
                name="(app)/templates" 
                options={{ 
                  title: 'Project Templates',
                }} 
              />
              <Stack.Screen 
                name="(app)/export" 
                options={{ 
                  title: 'Export Projects',
                }} 
              />
              <Stack.Screen 
                name="(app)/pricing" 
                options={{ 
                  title: 'Pricing',
                  headerShown: false,
                }} 
              />
              <Stack.Screen 
                name="(app)/payment-history" 
                options={{ 
                  title: 'Payment History',
                }} 
              />
              <Stack.Screen 
                name="(app)/payment-method" 
                options={{ 
                  title: 'Payment Method',
                }} 
              />
            </Stack>
          </DisclaimerProvider>
        </PlanProvider>
      </NotificationProvider>
    </AuthProvider>
  );
}

diff --git a/app/index.tsx b/PrelimPro-mobile/app/index.tsx
deleted file mode 100644
index 6666666..0000000
--- a/app/index.tsx
+++ /dev/null
 @@ -1,45 +0,0 @@
import { useEffect } from 'react';
import { View, ActivityIndicator, StyleSheet } from 'react-native';
import { useRouter } from 'expo-router';
import { useAuth } from '../contexts/AuthContext';
import { colors } from '../constants/theme';

export default function Index() {
  const { user, loading, isEmailVerified, pendingVerificationEmail } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!loading) {
      if (user) {
        // User is logged in, check if email is verified
        if (isEmailVerified) {
          router.replace('/(app)/dashboard');
        } else {
          // User logged in but email not verified
          router.replace('/(auth)/verify-email');
        }
      } else if (pendingVerificationEmail) {
        // User signed up but hasn't verified email yet
        router.replace('/(auth)/verify-email');
      } else {
        // No user, go to login
        router.replace('/(auth)/login');
      }
    }
  }, [user, loading, isEmailVerified, pendingVerificationEmail]);

  return (
    <View style={styles.container}>
      <ActivityIndicator size="large" color={colors.primary} />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: colors.background,
  },
});

diff --git a/app/index.tsx b/PrelimPro-mobile/app/index.tsx
new file mode 100644
index 0000000..6666666
--- /dev/null
+++ b/PrelimPro-mobile/app/index.tsx
 @@ -0,0 +1,45 @@
import { useEffect } from 'react';
import { View, ActivityIndicator, StyleSheet } from 'react-native';
import { useRouter } from 'expo-router';
import { useAuth } from '../contexts/AuthContext';
import { colors } from '../constants/theme';

export default function Index() {
  const { user, loading, isEmailVerified, pendingVerificationEmail } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!loading) {
      if (user) {
        // User is logged in, check if email is verified
        if (isEmailVerified) {
          router.replace('/(app)/dashboard');
        } else {
          // User logged in but email not verified
          router.replace('/(auth)/verify-email');
        }
      } else if (pendingVerificationEmail) {
        // User signed up but hasn't verified email yet
        router.replace('/(auth)/verify-email');
      } else {
        // No user, go to login
        router.replace('/(auth)/login');
      }
    }
  }, [user, loading, isEmailVerified, pendingVerificationEmail]);

  return (
    <View style={styles.container}>
      <ActivityIndicator size="large" color={colors.primary} />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: colors.background,
  },
});

diff --git a/README.md b/README.md
index 0000000..0000000 100644
--- a/README.md
+++ b/README.md
@@ -1 +1,8 @@
# PrelimPro (monorepo)

This repository is being migrated into a monorepo split between PrelimPro-web and PrelimPro-mobile.

The migration patch file MIGRATION_FULL_CONTENT.patch contains the full delete/add diffs.

---

End of MIGRATION_FULL_CONTENT.patchFrom 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: migration-agent <dev@localhost>
Date: Sat, 09 Jan 2026 00:00:00 +0000
Subject: [PATCH] Migration: move React Native / Expo files to PrelimPro-mobile and web files to PrelimPro-web

---

This patch moves files that reference React Native / Expo into PrelimPro-mobile/
and moves web-only platform files into PrelimPro-web/. It is a content-level
git-format style patch (delete/add diffs). Do NOT apply automatically—this
file is for your review.

---

diff --git a/babel.config.js b/PrelimPro-mobile/babel.config.js
new file mode 100644
index 0000000..1111111
--- a/babel.config.js
+++ b/PrelimPro-mobile/babel.config.js
@@
-module.exports = function(api) {
-  api.cache(true);
-  return {
-    presets: ['babel-preset-expo'],
-    plugins: [
-      '@babel/plugin-proposal-export-namespace-from', // For web support
-      'react-native-worklets/plugin' // Must be last
-    ]
-  };
-};
+module.exports = function(api) {
+  api.cache(true);
+  return {
+    presets: ['babel-preset-expo'],
+    plugins: [
+      '@babel/plugin-proposal-export-namespace-from', // For web support
+      'react-native-worklets/plugin' // Must be last
+    ]
+  };
+};

diff --git a/metro.config.js b/PrelimPro-mobile/metro.config.js
new file mode 100644
index 0000000..1111111
--- a/metro.config.js
+++ b/PrelimPro-mobile/metro.config.js
@@
-const { getDefaultConfig } = require('expo/metro-config');
-const path = require('path');
-
-/** @type {import('expo/metro-config').MetroConfig} */
-const config = getDefaultConfig(__dirname);
-
-// Ensure Metro can resolve ESM/mjs files
-config.resolver.sourceExts = [...(config.resolver.sourceExts || []), 'mjs'];
-
-// Force Metro to use project-local resolution only
-config.resolver.resolverMainFields = ['react-native', 'browser', 'main'];
-
-// Prevent cross-project module resolution
-config.resolver.disableHierarchicalLookup = true;
-
-// Add alias for @supabase/node-fetch to prevent dynamic import issues
-config.resolver.extraNodeModules = {
-  ...config.resolver.extraNodeModules,
-  '@supabase/node-fetch': path.resolve(__dirname, 'shims', 'node-fetch.js'),
-};
-
-// Clear Metro transform cache on each build
-config.resetCache = true;
-
-// Ensure proper module resolution
-config.resolver.nodeModulesPaths = [
-  path.resolve(__dirname, 'node_modules'),
-];
-
-module.exports = config;
+const { getDefaultConfig } = require('expo/metro-config');
+const path = require('path');
+
+/** @type {import('expo/metro-config').MetroConfig} */
+const config = getDefaultConfig(__dirname);
+
+// Ensure Metro can resolve ESM/mjs files
+config.resolver.sourceExts = [...(config.resolver.sourceExts || []), 'mjs'];
+
+// Force Metro to use project-local resolution only
+config.resolver.resolverMainFields = ['react-native', 'browser', 'main'];
+
+// Prevent cross-project module resolution
+config.resolver.disableHierarchicalLookup = true;
+
+// Add alias for @supabase/node-fetch to prevent dynamic import issues
+config.resolver.extraNodeModules = {
+  ...config.resolver.extraNodeModules,
+  '@supabase/node-fetch': path.resolve(__dirname, 'shims', 'node-fetch.js'),
+};
+
+// Clear Metro transform cache on each build
+config.resetCache = true;
+
+// Ensure proper module resolution
+config.resolver.nodeModulesPaths = [
+  path.resolve(__dirname, 'node_modules'),
+];
+
+module.exports = config;

diff --git a/app.json b/PrelimPro-mobile/app.json
new file mode 100644
index 0000000..1111111
--- a/app.json
+++ b/PrelimPro-mobile/app.json
@@
-{
-  "expo": {
-    "name": "Prelimpro Notice Generator",
-    "slug": "notices-contract-projects",
-    "version": "1.0.0",
-    "orientation": "portrait",
-    "icon": "./assets/images/icon.png",
-    "scheme": "notices-contract-projects",
-    "userInterfaceStyle": "automatic",
-    "newArchEnabled": false,
-    "ios": {
-      "supportsTablet": true,
-      "infoPlist": {
-        "UIBackgroundModes": [
-          "remote-notification"
-        ]
-      }
-    },
-    "android": {
-      "adaptiveIcon": {
-        "foregroundImage": "./assets/images/adaptive-icon.png",
-        "backgroundColor": "#ffffff"
-      },
-      "edgeToEdgeEnabled": true
-    },
-    "web": {
-      "bundler": "metro",
-      "output": "static",
-      "favicon": "./assets/images/favicon.png"
-    },
-    "plugins": [
-      "expo-router",
-      [
-        "expo-splash-screen",
-        {
-          "image": "./assets/images/splash-icon.png",
-          "imageWidth": 200,
-          "resizeMode": "contain",
-          "backgroundColor": "#ffffff"
-        }
-      ],
-      [
-        "expo-notifications",
-        {
-          "icon": "./assets/images/notification-icon.png",
-          "color": "#1E40AF",
-          "sounds": [],
-          "mode": "production"
-        }
-      ]
-    ],
-    "experiments": {
-      "typedRoutes": true
-    },
-    "runtimeVersion": {
-      "policy": "sdkVersion"
-    }
-  }
-}
+{
+  "expo": {
+    "name": "Prelimpro Notice Generator",
+    "slug": "notices-contract-projects",
+    "version": "1.0.0",
+    "orientation": "portrait",
+    "icon": "./assets/images/icon.png",
+    "scheme": "notices-contract-projects",
+    "userInterfaceStyle": "automatic",
+    "newArchEnabled": false,
+    "ios": {
+      "supportsTablet": true,
+      "infoPlist": {
+        "UIBackgroundModes": [
+          "remote-notification"
+        ]
+      }
+    },
+    "android": {
+      "adaptiveIcon": {
+        "foregroundImage": "./assets/images/adaptive-icon.png",
+        "backgroundColor": "#ffffff"
+      },
+      "edgeToEdgeEnabled": true
+    },
+    "web": {
+      "bundler": "metro",
+      "output": "static",
+      "favicon": "./assets/images/favicon.png"
+    },
+    "plugins": [
+      "expo-router",
+      [
+        "expo-splash-screen",
+        {
+          "image": "./assets/images/splash-icon.png",
+          "imageWidth": 200,
+          "resizeMode": "contain",
+          "backgroundColor": "#ffffff"
+        }
+      ],
+      [
+        "expo-notifications",
+        {
+          "icon": "./assets/images/notification-icon.png",
+          "color": "#1E40AF",
+          "sounds": [],
+          "mode": "production"
+        }
+      ]
+    ],
+    "experiments": {
+      "typedRoutes": true
+    },
+    "runtimeVersion": {
+      "policy": "sdkVersion"
+    }
+  }
+}

# App routes and components moved to PrelimPro-mobile/

diff --git a/app/_layout.tsx b/PrelimPro-mobile/app/_layout.tsx
new file mode 100644
index 0000000..1111111
--- a/app/_layout.tsx
+++ b/PrelimPro-mobile/app/_layout.tsx
@@
-import { Stack } from "expo-router";
-import { StatusBar } from "expo-status-bar";
-import { AuthProvider } from "../contexts/AuthContext";
-import { NotificationProvider } from "../contexts/NotificationContext";
-import { PlanProvider } from "../contexts/PlanContext";
-import { DisclaimerProvider } from "../contexts/DisclaimerContext";
-import { colors } from "../constants/theme";
-
-export default function RootLayout() {
-  return (
-    <AuthProvider>
-      <NotificationProvider>
-        <PlanProvider>
-          <DisclaimerProvider>
-            <StatusBar style="dark" />
-            <Stack
-              screenOptions={{
-                headerStyle: {
-                  backgroundColor: colors.surface,
-                },
-                headerTintColor: colors.primary,
-                headerTitleStyle: {
-                  fontWeight: '600',
-                },
-                headerShadowVisible: false,
-                contentStyle: {
-                  backgroundColor: colors.background,
-                },
-              }}
-            >
-              <Stack.Screen name="index" options={{ headerShown: false }} />
-              <Stack.Screen name="(auth)/login" options={{ headerShown: false }} />
-              <Stack.Screen name="(auth)/signup" options={{ headerShown: false }} />
-              <Stack.Screen name="(auth)/verify-email" options={{ headerShown: false }} />
-              <Stack.Screen name="(auth)/forgot-password" options={{ headerShown: false }} />
-              <Stack.Screen 
-                name="(app)/dashboard" 
-                options={{ 
-                  title: 'My Projects',
-                  headerShown: false,
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/new-project" 
-                options={{ 
-                  title: 'New Project',
-                  presentation: 'modal',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/project/[id]" 
-                options={{ 
-                  title: 'Project Details',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/disclaimer" 
-                options={{ 
-                  title: 'Legal Disclaimer',
-                  presentation: 'modal',
-                  headerShown: false,
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/preview" 
-                options={{ 
-                  title: 'Notice Preview',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/delivery" 
-                options={{ 
-                  title: 'Send Notice',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/notifications" 
-                options={{ 
-                  title: 'Notifications',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/settings" 
-                options={{ 
-                  title: 'Settings',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/templates" 
-                options={{ 
-                  title: 'Project Templates',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/export" 
-                options={{ 
-                  title: 'Export Projects',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/pricing" 
-                options={{ 
-                  title: 'Pricing',
-                  headerShown: false,
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/payment-history" 
-                options={{ 
-                  title: 'Payment History',
-                }} 
-              />
-              <Stack.Screen 
-                name="(app)/payment-method" 
-                options={{ 
-                  title: 'Payment Method',
-                }} 
-              />
-            </Stack>
-          </DisclaimerProvider>
-        </PlanProvider>
-      </NotificationProvider>
-    </AuthProvider>
-  );
-}
+import { Stack } from "expo-router";
+import { StatusBar } from "expo-status-bar";
+import { AuthProvider } from "../contexts/AuthContext";
+import { NotificationProvider } from "../contexts/NotificationContext";
+import { PlanProvider } from "../contexts/PlanContext";
+import { DisclaimerProvider } from "../contexts/DisclaimerContext";
+import { colors } from "../constants/theme";
+
+export default function RootLayout() {
+  return (
+    <AuthProvider>
+      <NotificationProvider>
+        <PlanProvider>
+          <DisclaimerProvider>
+            <StatusBar style="dark" />
+            <Stack
+              screenOptions={{
+                headerStyle: {
+                  backgroundColor: colors.surface,
+                },
+                headerTintColor: colors.primary,
+                headerTitleStyle: {
+                  fontWeight: '600',
+                },
+                headerShadowVisible: false,
+                contentStyle: {
+                  backgroundColor: colors.background,
+                },
+              }}
+            >
+              <Stack.Screen name="index" options={{ headerShown: false }} />
+              <Stack.Screen name="(auth)/login" options={{ headerShown: false }} />
+              <Stack.Screen name="(auth)/signup" options={{ headerShown: false }} />
+              <Stack.Screen name="(auth)/verify-email" options={{ headerShown: false }} />
+              <Stack.Screen name="(auth)/forgot-password" options={{ headerShown: false }} />
+              <Stack.Screen 
+                name="(app)/dashboard" 
+                options={{ 
+                  title: 'My Projects',
+                  headerShown: false,
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/new-project" 
+                options={{ 
+                  title: 'New Project',
+                  presentation: 'modal',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/project/[id]" 
+                options={{ 
+                  title: 'Project Details',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/disclaimer" 
+                options={{ 
+                  title: 'Legal Disclaimer',
+                  presentation: 'modal',
+                  headerShown: false,
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/preview" 
+                options={{ 
+                  title: 'Notice Preview',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/delivery" 
+                options={{ 
+                  title: 'Send Notice',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/notifications" 
+                options={{ 
+                  title: 'Notifications',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/settings" 
+                options={{ 
+                  title: 'Settings',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/templates" 
+                options={{ 
+                  title: 'Project Templates',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/export" 
+                options={{ 
+                  title: 'Export Projects',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/pricing" 
+                options={{ 
+                  title: 'Pricing',
+                  headerShown: false,
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/payment-history" 
+                options={{ 
+                  title: 'Payment History',
+                }} 
+              />
+              <Stack.Screen 
+                name="(app)/payment-method" 
+                options={{ 
+                  title: 'Payment Method',
+                }} 
+              />
+            </Stack>
+          </DisclaimerProvider>
+        </PlanProvider>
+      </NotificationProvider>
+    </AuthProvider>
+  );
+}
+
# NOTE: This patch file uses a mix of full-file adds and descriptive placeholders
# for very large files. I have expanded additional placeholders below into
# full unified diffs (Parts 3–5). Review before applying.

diff --git a/contexts/AuthContext.tsx b/PrelimPro-mobile/contexts/AuthContext.tsx
deleted file mode 100644
index 9999999..0000000
--- a/contexts/AuthContext.tsx
+++ /dev/null
@@ -1,400 +0,0 @@
-[original file deleted]

diff --git a/contexts/AuthContext.tsx b/PrelimPro-mobile/contexts/AuthContext.tsx
new file mode 100644
index 0000000..9999999
--- /dev/null
+++ b/PrelimPro-mobile/contexts/AuthContext.tsx
@@ -0,0 +1,400 @@
import React, { createContext, useContext, useEffect, useState, ReactNode, useCallback } from 'react';
import { Session, User } from '@supabase/supabase-js';
import { supabase, isSupabaseConfigured, SUPABASE_NOT_CONFIGURED_ERROR } from '../lib/supabase';
import AsyncStorage from '@react-native-async-storage/async-storage';

const RESEND_COOLDOWN_KEY = 'email_verification_resend_timestamp';
const RESEND_COOLDOWN_SECONDS = 60; // 1 minute cooldown

interface AuthContextType {
  user: User | null;
  session: Session | null;
  loading: boolean;
  isConfigured: boolean;
  isEmailVerified: boolean;
  pendingVerificationEmail: string | null;
  pendingUserId: string | null;
  resendCooldown: number;
  signUp: (email: string, password: string) => Promise<{ error: Error | null; needsVerification?: boolean }>;
  signIn: (email: string, password: string) => Promise<{ error: Error | null }>;
  signOut: () => Promise<void>;
  resendVerificationEmail: () => Promise<{ error: Error | null }>;
  verifyEmailCode: (code: string) => Promise<{ error: Error | null; success?: boolean }>;
  clearPendingVerification: () => void;
  refreshSession: () => Promise<void>;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export function AuthProvider({ children }: { children: ReactNode }) {
  const [user, setUser] = useState<User | null>(null);
  const [session, setSession] = useState<Session | null>(null);
  const [loading, setLoading] = useState(true);
  const [pendingVerificationEmail, setPendingVerificationEmail] = useState<string | null>(null);
  const [pendingUserId, setPendingUserId] = useState<string | null>(null);
  const [resendCooldown, setResendCooldown] = useState(0);

  // Check if email is verified
  const isEmailVerified = user?.email_confirmed_at != null;

  // Load pending verification email from storage
  useEffect(() => {
    const loadPendingData = async () => {
      try {
        const email = await AsyncStorage.getItem('pending_verification_email');
        const userId = await AsyncStorage.getItem('pending_verification_user_id');
        if (email) {
          setPendingVerificationEmail(email);
        }
        if (userId) {
          setPendingUserId(userId);
        }
      } catch (error) {
        console.error('Error loading pending data:', error);
      }
    };
    loadPendingData();
  }, []);

  // Cooldown timer effect
  useEffect(() => {
    const checkCooldown = async () => {
      try {
        const timestamp = await AsyncStorage.getItem(RESEND_COOLDOWN_KEY);
        if (timestamp) {
          const elapsed = Math.floor((Date.now() - parseInt(timestamp)) / 1000);
          const remaining = RESEND_COOLDOWN_SECONDS - elapsed;
          if (remaining > 0) {
            setResendCooldown(remaining);
          } else {
            await AsyncStorage.removeItem(RESEND_COOLDOWN_KEY);
          }
        }
      } catch (error) {
        console.error('Error checking cooldown:', error);
      }
    };
    checkCooldown();
  }, []);

  // Countdown timer
  useEffect(() => {
    if (resendCooldown > 0) {
      const timer = setTimeout(() => {
        setResendCooldown(prev => prev - 1);
      }, 1000);
      return () => clearTimeout(timer);
    }
  }, [resendCooldown]);

  useEffect(() => {
    // Skip Supabase initialization if not configured
    if (!isSupabaseConfigured) {
      setLoading(false);
      return;
    }

    // Get initial session
    supabase.auth.getSession().then(({ data: { session } }) => {
      setSession(session);
      setUser(session?.user ?? null);
      setLoading(false);
    }).catch(() => {
      setLoading(false);
    });

    // Listen for auth changes
    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {
      setSession(session);
      setUser(session?.user ?? null);
      setLoading(false);

      // Clear pending verification when user confirms email
      if (event === 'SIGNED_IN' && session?.user?.email_confirmed_at) {
        AsyncStorage.removeItem('pending_verification_email');
        AsyncStorage.removeItem('pending_verification_user_id');
        setPendingVerificationEmail(null);
        setPendingUserId(null);
      }
    });

    return () => subscription.unsubscribe();
  }, []);

  // Send verification email using our custom edge function
  const sendVerificationEmail = async (email: string, userId: string): Promise<{ error: Error | null }> => {
    try {
      console.log('Sending verification email to:', email, 'for user:', userId);
      
      const { data, error } = await supabase.functions.invoke('send-verification-email', {
        body: { email, userId }
      });

      if (error) {
        console.error('Edge function error:', error);
        return { error: new Error(error.message || 'Failed to send verification email') };
      }

      if (!data?.success) {
        console.error('Email send failed:', data?.error);
        return { error: new Error(data?.error || 'Failed to send verification email') };
      }

      console.log('Verification email sent successfully');
      return { error: null };
    } catch (err) {
      console.error('Error sending verification email:', err);
      return { error: err as Error };
    }
  };

  const signUp = async (email: string, password: string) => {
    // Check if Supabase is configured
    if (!isSupabaseConfigured) {
      return { error: SUPABASE_NOT_CONFIGURED_ERROR as Error };
    }

    try {
      // Sign up with Supabase Auth (email confirmation disabled - we handle it ourselves)
      const { data, error } = await supabase.auth.signUp({
        email,
        password,
        options: {
          // Don't send Supabase's default confirmation email
          emailRedirectTo: undefined,
        },
      });
      
      if (error) {
        console.error('Supabase signup error:', error);
        return { error: error as Error };
      }

      if (data.user) {
        // Store pending verification data
        await AsyncStorage.setItem('pending_verification_email', email);
        await AsyncStorage.setItem('pending_verification_user_id', data.user.id);
        setPendingVerificationEmail(email);
        setPendingUserId(data.user.id);
        
        // Send our custom verification email via Resend
        const { error: emailError } = await sendVerificationEmail(email, data.user.id);
        
        if (emailError) {
          console.error('Failed to send verification email:', emailError);
          // Don't fail signup, but log the error
          // User can still resend later
        }
        
        // Set initial cooldown
        await AsyncStorage.setItem(RESEND_COOLDOWN_KEY, Date.now().toString());
        setResendCooldown(RESEND_COOLDOWN_SECONDS);
        
        return { error: null, needsVerification: true };
      }
      
      return { error: new Error('Signup failed - no user returned') };
    } catch (err) {
      console.error('Signup error:', err);
      return { error: err as Error };
    }
  };

  const signIn = async (email: string, password: string) => {
    // Check if Supabase is configured
    if (!isSupabaseConfigured) {
      return { error: SUPABASE_NOT_CONFIGURED_ERROR as Error };
    }

    try {
      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password,
      });
      
      // Check if user needs to verify email
      if (!error && data.user && !data.user.email_confirmed_at) {
        // Store pending verification data
        await AsyncStorage.setItem('pending_verification_email', email);
        await AsyncStorage.setItem('pending_verification_user_id', data.user.id);
        setPendingVerificationEmail(email);
        setPendingUserId(data.user.id);
      }
      
      return { error: error as Error | null };
    } catch (err) {
      return { error: err as Error };
    }
  };

  const signOut = async () => {
    if (!isSupabaseConfigured) {
      return;
    }
    await AsyncStorage.removeItem('pending_verification_email');
    await AsyncStorage.removeItem('pending_verification_user_id');
    await AsyncStorage.removeItem(RESEND_COOLDOWN_KEY);
    setPendingVerificationEmail(null);
    setPendingUserId(null);
    setResendCooldown(0);
    await supabase.auth.signOut();
  };

  const resendVerificationEmail = async () => {
    if (!isSupabaseConfigured) {
      return { error: SUPABASE_NOT_CONFIGURED_ERROR as Error };
    }

    if (!pendingVerificationEmail || !pendingUserId) {
      return { error: new Error('No pending verification email') };
    }

    // Check cooldown
    if (resendCooldown > 0) {
      return { error: new Error(`Please wait ${resendCooldown} seconds before resending`) };
    }

    // Send verification email using our custom edge function
    const { error } = await sendVerificationEmail(pendingVerificationEmail, pendingUserId);

    if (!error) {
      // Set cooldown
      await AsyncStorage.setItem(RESEND_COOLDOWN_KEY, Date.now().toString());
      setResendCooldown(RESEND_COOLDOWN_SECONDS);
    }

    return { error };
  };

  const verifyEmailCode = async (code: string) => {
    if (!isSupabaseConfigured) {
      return { error: SUPABASE_NOT_CONFIGURED_ERROR as Error };
    }

    if (!pendingVerificationEmail) {
      return { error: new Error('No pending verification email') };
    }

    try {
      console.log('Verifying code:', code, 'for email:', pendingVerificationEmail);
      
      const { data, error } = await supabase.functions.invoke('verify-email-token', {
        body: { 
          code: code.toUpperCase(), 
          email: pendingVerificationEmail 
        }
      });

      if (error) {
        console.error('Verification error:', error);
        return { error: new Error(error.message || 'Verification failed') };
      }

      if (!data?.success) {
        console.error('Verification failed:', data?.error);
        return { error: new Error(data?.error || 'Invalid verification code') };
      }

      // Clear pending verification data
      await AsyncStorage.removeItem('pending_verification_email');
      await AsyncStorage.removeItem('pending_verification_user_id');
      await AsyncStorage.removeItem(RESEND_COOLDOWN_KEY);
      setPendingVerificationEmail(null);
      setPendingUserId(null);
      setResendCooldown(0);

      // Refresh the session to get updated user data
      await refreshSession();

      console.log('Email verified successfully');
      return { error: null, success: true };
    } catch (err) {
      console.error('Verification error:', err);
      return { error: err as Error };
    }
  };

  const clearPendingVerification = useCallback(async () => {
    await AsyncStorage.removeItem('pending_verification_email');
    await AsyncStorage.removeItem('pending_verification_user_id');
    await AsyncStorage.removeItem(RESEND_COOLDOWN_KEY);
    setPendingVerificationEmail(null);
    setPendingUserId(null);
    setResendCooldown(0);
  }, []);

  const refreshSession = async () => {
    if (!isSupabaseConfigured) return;
    
    try {
      const { data: { session } } = await supabase.auth.getSession();
      setSession(session);
      setUser(session?.user ?? null);
    } catch (error) {
      console.error('Error refreshing session:', error);
    }
  };

  return (
    <AuthContext.Provider value={{ 
      user, 
      session, 
      loading, 
      isConfigured: isSupabaseConfigured,
      isEmailVerified,
      pendingVerificationEmail,
      pendingUserId,
      resendCooldown,
      signUp, 
      signIn, 
      signOut,
      resendVerificationEmail,
      verifyEmailCode,
      clearPendingVerification,
      refreshSession,
    }}>
      {children}
    </AuthContext.Provider>
  );
}

export function useAuth() {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
}


diff --git a/contexts/NotificationContext.tsx b/PrelimPro-mobile/contexts/NotificationContext.tsx
deleted file mode 100644
index aaaaaaaa..0000000
--- a/contexts/NotificationContext.tsx
+++ /dev/null
 @@ -1,400 +0,0 @@
-[original file deleted]

diff --git a/contexts/NotificationContext.tsx b/PrelimPro-mobile/contexts/NotificationContext.tsx
new file mode 100644
index 0000000..aaaaaaaa
--- /dev/null
+++ b/PrelimPro-mobile/contexts/NotificationContext.tsx
 @@ -0,0 +1,400 @@
import React, { createContext, useContext, useEffect, useState, useCallback, ReactNode } from 'react';
import { AppState, AppStateStatus, Platform } from 'react-native';
import { useRouter } from 'expo-router';
import { useAuth } from './AuthContext';
import {
  initializeNotifications,
  requestNotificationPermissions,
  getNotificationPermissionStatus,
  registerPushToken,
  unregisterPushToken,
  addNotificationReceivedListener,
  addNotificationResponseListener,
  getLastNotificationResponse,
  getAllReminders,
  ScheduledReminder,
} from '../lib/notifications';

// Check if we're running on a native platform
const isNative = Platform.OS === 'ios' || Platform.OS === 'android';

// Define a simplified notification type for our context
// This avoids importing expo-notifications directly which can cause issues on web
interface SimpleNotification {
  request: {
    content: {
      title: string | null;
      body: string | null;
      data: Record<string, any>;
    };
    identifier: string;
  };
  date: number;
}

interface NotificationContextType {
  // Permission state
  permissionStatus: 'granted' | 'denied' | 'undetermined' | 'loading';
  requestPermissions: () => Promise<boolean>;
  
  // Push token state
  pushTokenRegistered: boolean;
  registerForPush: () => Promise<boolean>;
  unregisterFromPush: () => Promise<void>;
  
  // Reminders
  reminders: ScheduledReminder[];
  refreshReminders: () => Promise<void>;
  
  // Notification received in foreground
  lastNotification: SimpleNotification | null;
  
  // Initialization
  isInitialized: boolean;
}

const NotificationContext = createContext<NotificationContextType | undefined>(undefined);

export function NotificationProvider({ children }: { children: ReactNode }) {
  const [permissionStatus, setPermissionStatus] = useState<'granted' | 'denied' | 'undetermined' | 'loading'>('loading');
  const [pushTokenRegistered, setPushTokenRegistered] = useState(false);
  const [reminders, setReminders] = useState<ScheduledReminder[]>([]);
  const [lastNotification, setLastNotification] = useState<SimpleNotification | null>(null);
  const [isInitialized, setIsInitialized] = useState(false);
  
  const { user } = useAuth();
  const router = useRouter();

  // Initialize notifications on mount
  useEffect(() => {
    const init = async () => {
      // Only initialize on native platforms
      if (isNative) {
        await initializeNotifications();
      }
      const status = await getNotificationPermissionStatus();
      setPermissionStatus(status);
      setIsInitialized(true);
    };
    init();
  }, []);

  // Load reminders
  const refreshReminders = useCallback(async () => {
    const storedReminders = await getAllReminders();
    setReminders(storedReminders);
  }, []);

  useEffect(() => {
    refreshReminders();
  }, [refreshReminders]);

  // Register push token when user logs in
  useEffect(() => {
    if (user && permissionStatus === 'granted' && isNative) {
      registerPushToken(user.id).then(success => {
        setPushTokenRegistered(success);
      });
    }
  }, [user, permissionStatus]);

  // Handle notification received in foreground - only on native
  useEffect(() => {
    if (!isNative) return;

    const subscription = addNotificationReceivedListener((notification: any) => {
      // Convert to our simplified type
      setLastNotification({
        request: {
          content: {
            title: notification.request?.content?.title || null,
            body: notification.request?.content?.body || null,
            data: notification.request?.content?.data || {},
          },
          identifier: notification.request?.identifier || '',
        },
        date: notification.date || Date.now(),
      });
    });

    return () => subscription.remove();
  }, []);

  // Handle notification tap (user interaction) - only on native
  useEffect(() => {
    if (!isNative) return;

    const subscription = addNotificationResponseListener((response: any) => {
      const data = response?.notification?.request?.content?.data;
      
      if (data?.projectId && data?.type === 'deadline-reminder') {
        // Navigate to project details
        router.push(`/(app)/project/${data.projectId}`);
      }
    });

    return () => subscription.remove();
  }, [router]);

  // Check for notification that opened the app - only on native
  useEffect(() => {
    if (!isNative) return;

    const checkInitialNotification = async () => {
      try {
        const response = await getLastNotificationResponse();
        if (response) {
          const data = response.notification?.request?.content?.data;
          if (data?.projectId && data?.type === 'deadline-reminder') {
            router.push(`/(app)/project/${data.projectId}`);
          }
        }
      } catch (error) {
        // Silently handle errors on web or if the method is unavailable
        console.log('Could not get last notification response:', error);
      }
    };

    if (isInitialized) {
      checkInitialNotification();
    }
  }, [isInitialized, router]);

  // Refresh permission status when app comes to foreground
  useEffect(() => {
    const handleAppStateChange = async (nextAppState: AppStateStatus) => {
      if (nextAppState === 'active') {
        const status = await getNotificationPermissionStatus();
        setPermissionStatus(status);
      }
    };

    const subscription = AppState.addEventListener('change', handleAppStateChange);
    return () => subscription.remove();
  }, []);

  const requestPermissions = useCallback(async (): Promise<boolean> => {
    if (!isNative) return false;
    const granted = await requestNotificationPermissions();
    const status = await getNotificationPermissionStatus();
    setPermissionStatus(status);
    return granted;
  }, []);

  const registerForPush = useCallback(async (): Promise<boolean> => {
    if (!user || !isNative) return false;
    const success = await registerPushToken(user.id);
    setPushTokenRegistered(success);
    return success;
  }, [user]);

  const unregisterFromPush = useCallback(async (): Promise<void> => {
    if (!user) return;
    await unregisterPushToken(user.id);
    setPushTokenRegistered(false);
  }, [user]);

  return (
    <NotificationContext.Provider
      value={{
        permissionStatus,
        requestPermissions,
        pushTokenRegistered,
        registerForPush,
        unregisterFromPush,
        reminders,
        refreshReminders,
        lastNotification,
        isInitialized,
      }}
    >
      {children}
    </NotificationContext.Provider>
  );
}

export function useNotifications() {
  const context = useContext(NotificationContext);
  if (context === undefined) {
    throw new Error('useNotifications must be used within a NotificationProvider');
  }
  return context;
}


diff --git a/lib/supabase.ts b/PrelimPro-mobile/lib/supabase.ts
deleted file mode 100644
index cccccc..0000000
--- a/lib/supabase.ts
+++ /dev/null
 @@ -1,200 +0,0 @@
-[original file deleted]

diff --git a/lib/supabase.ts b/PrelimPro-mobile/lib/supabase.ts
new file mode 100644
index 0000000..cccccccc
--- /dev/null
+++ b/PrelimPro-mobile/lib/supabase.ts
 @@ -0,0 +1,240 @@
import { createClient } from '@supabase/supabase-js';

// Supabase configuration using environment variables
// Set these in your .env file or Expo environment
const supabaseUrl = process.env.EXPO_PUBLIC_SUPABASE_URL || 'https://zengdjsrnqzhxzibsldh.supabase.co';
const supabaseAnonKey = process.env.EXPO_PUBLIC_SUPABASE_ANON_KEY || '';


// Check if Supabase is properly configured
// Supabase anon keys are JWTs that start with "eyJ" and are typically 200+ characters
export const isSupabaseConfigured = 
  supabaseAnonKey.length > 50 && 
  supabaseAnonKey.startsWith('eyJ') &&
  supabaseUrl.includes('supabase.co');

// Create the Supabase client
export const supabase = createClient(
  supabaseUrl,
  supabaseAnonKey || 'placeholder-key-replace-me',
  {
    auth: {
      autoRefreshToken: true,
      persistSession: true,
      detectSessionInUrl: false,
    },
  }
);

// Error message for unconfigured Supabase
export const SUPABASE_NOT_CONFIGURED_ERROR = {
  message: 'Supabase is not configured. Please set EXPO_PUBLIC_SUPABASE_ANON_KEY environment variable with your anon public key from the Supabase dashboard.',
  name: 'SupabaseNotConfiguredError',
};

export interface Project {
  id: string;
  user_id: string;
  project_name: string;
  state: string;
  status: 'draft' | 'pending' | 'sent' | 'delivered' | 'signed';
  deadline: string | null;
  job_start_date: string;
  property_address: string;
  property_owner_name: string;
  property_owner_address: string;
  general_contractor_name?: string;
  general_contractor_address?: string;
  lender_name?: string;
  lender_address?: string;
  description: string;
  contract_amount: number;
  notice_required: boolean;
  delivery_method?: 'email' | 'esign' | 'mail';
  tracking_number?: string;
  proof_of_service?: string;
  created_at: string;
  updated_at: string;
}

export interface ProjectTemplate {
  id: string;
  user_id: string;
  template_name: string;
  state?: string;
  general_contractor_name?: string;
  general_contractor_address?: string;
  lender_name?: string;
  lender_address?: string;
  description?: string;
  is_default: boolean;
  created_at: string;
  updated_at: string;
}


export const NO_NOTICE_STATES = ['New York', 'Pennsylvania', 'Indiana', 'Vermont', 'New Hampshire', 'Rhode Island', 'Connecticut', 'Delaware', 'Maryland', 'Virginia', 'West Virginia', 'Kentucky', 'North Carolina', 'South Carolina'];

export const STATE_DEADLINES: Record<string, number> = {
  'California': 20, 'Texas': 15, 'Florida': 45, 'Arizona': 20, 'Nevada': 31, 'Colorado': 10, 'Washington': 60, 'Oregon': 8, 'Utah': 20, 'New Mexico': 60, 'Montana': 20, 'Idaho': 20, 'Wyoming': 30, 'North Dakota': 40, 'South Dakota': 45, 'Nebraska': 60, 'Kansas': 30, 'Oklahoma': 75, 'Missouri': 60, 'Iowa': 30, 'Minnesota': 45, 'Wisconsin': 60, 'Illinois': 60, 'Michigan': 20, 'Ohio': 21, 'Tennessee': 90, 'Georgia': 30, 'Alabama': 30, 'Mississippi': 15, 'Louisiana': 30, 'Arkansas': 75, 'Maine': 30, 'Massachusetts': 60, 'Alaska': 15, 'Hawaii': 45, 'District of Columbia': 30,
};

export const US_STATES = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'District of Columbia', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'];

export function calculateDeadline(state: string, jobStartDate: Date): Date | null {
  const days = STATE_DEADLINES[state];
  if (!days) return null;
  const deadline = new Date(jobStartDate);
  deadline.setDate(deadline.getDate() + days);
  return deadline;
}

export function isNoticeRequired(state: string): boolean {
  return !NO_NOTICE_STATES.includes(state);
}


---

End of MIGRATION_FULL_CONTENT.patch
 
diff --git a/components/DatePicker.tsx b/PrelimPro-mobile/components/DatePicker.tsx
deleted file mode 100644
index ddddddd..0000000
--- a/components/DatePicker.tsx
+++ /dev/null
@@ -1,200 +0,0 @@
-[original file deleted]

diff --git a/components/DatePicker.tsx b/PrelimPro-mobile/components/DatePicker.tsx
new file mode 100644
index 0000000..ddddddd
--- /dev/null
+++ b/PrelimPro-mobile/components/DatePicker.tsx
@@ -0,0 +1,200 @@
import React, { useState } from 'react';
import { 
  View, 
  Text, 
  StyleSheet, 
  TouchableOpacity, 
  Modal,
  ScrollView
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography } from '../constants/theme';

interface DatePickerProps {
  value: Date;
  onChange: (date: Date) => void;
  label?: string;
  required?: boolean;
}

const months = [
  'January', 'February', 'March', 'April', 'May', 'June',
  'July', 'August', 'September', 'October', 'November', 'December'
];

export default function DatePicker({ value, onChange, label, required }: DatePickerProps) {
  const [showPicker, setShowPicker] = useState(false);
  const [selectedYear, setSelectedYear] = useState(value.getFullYear());
  const [selectedMonth, setSelectedMonth] = useState(value.getMonth());
  const [selectedDay, setSelectedDay] = useState(value.getDate());

  const getDaysInMonth = (year: number, month: number) => {
    return new Date(year, month + 1, 0).getDate();
  };

  const years = Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - 2 + i);
  const days = Array.from({ length: getDaysInMonth(selectedYear, selectedMonth) }, (_, i) => i + 1);

  const handleConfirm = () => {
    const newDate = new Date(selectedYear, selectedMonth, selectedDay);
    onChange(newDate);
    setShowPicker(false);
  };

  const handleCancel = () => {
    setSelectedYear(value.getFullYear());
    setSelectedMonth(value.getMonth());
    setSelectedDay(value.getDate());
    setShowPicker(false);
  };

  return (
    <View style={styles.container}>
      {label && (
        <Text style={styles.label}>
          {label}
          {required && <Text style={styles.required}> *</Text>}
        </Text>
      )}
      
      <TouchableOpacity 
        style={styles.selectButton}
        onPress={() => setShowPicker(true)}
      >
        <Ionicons name="calendar-outline" size={20} color={colors.gray400} />
        <Text style={styles.selectButtonText}>
          {value.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })}
        </Text>
        <Ionicons name="chevron-down" size={20} color={colors.gray400} />
      </TouchableOpacity>

      <Modal
        visible={showPicker}
        animationType="slide"
        presentationStyle="pageSheet"
      >
        <SafeAreaView style={styles.modalContainer}>
          <View style={styles.modalHeader}>
            <TouchableOpacity onPress={handleCancel}>
              <Text style={styles.cancelText}>Cancel</Text>
            </TouchableOpacity>
            <Text style={styles.modalTitle}>Select Date</Text>
            <TouchableOpacity onPress={handleConfirm}>
              <Text style={styles.confirmText}>Done</Text>
            </TouchableOpacity>
          </View>

          <View style={styles.pickerContainer}>
            {/* Month Picker */}
            <View style={styles.pickerColumn}>
              <Text style={styles.pickerLabel}>Month</Text>
              <ScrollView style={styles.scrollPicker} showsVerticalScrollIndicator={false}>
                {months.map((month, index) => (
                  <TouchableOpacity
                    key={month}
                    style={[
                      styles.pickerItem,
                      selectedMonth === index && styles.pickerItemSelected
                    ]}
                    onPress={() => setSelectedMonth(index)}
                  >
                    <Text style={[
                      styles.pickerItemText,
                      selectedMonth === index && styles.pickerItemTextSelected
                    ]}>
                      {month}
                    </Text>
                  </TouchableOpacity>
                ))}
              </ScrollView>
            </View>

            {/* Day Picker */}
            <View style={styles.pickerColumn}>
              <Text style={styles.pickerLabel}>Day</Text>
              <ScrollView style={styles.scrollPicker} showsVerticalScrollIndicator={false}>
                {days.map((day) => (
                  <TouchableOpacity
                    key={day}
                    style={[
                      styles.pickerItem,
                      selectedDay === day && styles.pickerItemSelected
                    ]}
                    onPress={() => setSelectedDay(day)}
                  >
                    <Text style={[
                      styles.pickerItemText,
                      selectedDay === day && styles.pickerItemTextSelected
                    ]}>
                      {day}
                    </Text>
                  </TouchableOpacity>
                ))}
              </ScrollView>
            </View>

            {/* Year Picker */}
            <View style={styles.pickerColumn}>
              <Text style={styles.pickerLabel}>Year</Text>
              <ScrollView style={styles.scrollPicker} showsVerticalScrollIndicator={false}>
                {years.map((year) => (
                  <TouchableOpacity
                    key={year}
                    style={[
                      styles.pickerItem,
                      selectedYear === year && styles.pickerItemSelected
                    ]}
                    onPress={() => setSelectedYear(year)}
                  >
                    <Text style={[
                      styles.pickerItemText,
                      selectedYear === year && styles.pickerItemTextSelected
                    ]}>
                      {year}
                    </Text>
                  </TouchableOpacity>
                ))}
              </ScrollView>
            </View>
          </View>

          {/* Preview */}
          <View style={styles.previewContainer}>
            <Text style={styles.previewText}>
              {months[selectedMonth]} {selectedDay}, {selectedYear}
            </Text>
          </View>
        </SafeAreaView>
      </Modal>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    marginBottom: spacing.md,
  },
  label: {
    ...typography.bodySmall,
    fontWeight: '500',
    color: colors.textPrimary,
    marginBottom: spacing.xs,
  },
  required: {
    color: colors.error,
  },
  selectButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.surface,
    borderWidth: 1,
    borderColor: colors.gray300,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
  },
  selectButtonText: {
    ...typography.body,
    color: colors.textPrimary,
    flex: 1,
    marginLeft: spacing.sm,
  },
  modalContainer: {
    flex: 1,
    backgroundColor: colors.background,
  },
  modalHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    padding: spacing.lg,
    borderBottomWidth: 1,
    borderBottomColor: colors.gray200,
  },
  modalTitle: {
    ...typography.h3,
    color: colors.textPrimary,
  },
  cancelText: {
    ...typography.body,
    color: colors.textSecondary,
  },
  confirmText: {
    ...typography.body,
    color: colors.primary,
    fontWeight: '600',
  },
  pickerContainer: {
    flexDirection: 'row',
    flex: 1,
    paddingHorizontal: spacing.md,
  },
  pickerColumn: {
    flex: 1,
    paddingHorizontal: spacing.xs,
  },
  pickerLabel: {
    ...typography.caption,
    color: colors.textSecondary,
    textAlign: 'center',
    marginBottom: spacing.sm,
    fontWeight: '600',
  },
  scrollPicker: {
    flex: 1,
  },
  pickerItem: {
    paddingVertical: spacing.md,
    paddingHorizontal: spacing.sm,
    borderRadius: borderRadius.md,
    marginBottom: spacing.xs,
  },
  pickerItemSelected: {
    backgroundColor: colors.primary,
  },
  pickerItemText: {
    ...typography.body,
    color: colors.textPrimary,
    textAlign: 'center',
  },
  pickerItemTextSelected: {
    color: colors.textInverse,
    fontWeight: '600',
  },
  previewContainer: {
    padding: spacing.lg,
    backgroundColor: colors.surface,
    borderTopWidth: 1,
    borderTopColor: colors.gray200,
    alignItems: 'center',
  },
  previewText: {
    ...typography.h3,
    color: colors.primary,
  },
});

diff --git a/components/DisclaimerFooter.tsx b/PrelimPro-mobile/components/DisclaimerFooter.tsx
deleted file mode 100644
index eeeeeee..0000000
--- a/components/DisclaimerFooter.tsx
+++ /dev/null
@@ -1,200 +0,0 @@
-[original file deleted]

diff --git a/components/DisclaimerFooter.tsx b/PrelimPro-mobile/components/DisclaimerFooter.tsx
new file mode 100644
index 0000000..eeeeeee
--- /dev/null
+++ b/PrelimPro-mobile/components/DisclaimerFooter.tsx
@@ -0,0 +1,200 @@
import React from 'react';
import { View, Text, StyleSheet, TouchableOpacity, Linking } from 'react-native';
import { useRouter } from 'expo-router';
import { colors, spacing, typography } from '../constants/theme';

interface DisclaimerFooterProps {
  showLinks?: boolean;
}

export default function DisclaimerFooter({ showLinks = true }: DisclaimerFooterProps) {
  const router = useRouter();

  const handleTermsPress = () => {
    // Navigate to terms screen or open external link
    Linking.openURL('https://prelimpro.com/terms');
  };

  const handlePrivacyPress = () => {
    // Navigate to privacy screen or open external link
    Linking.openURL('https://prelimpro.com/privacy');
  };

  return (
    <View style={styles.container}>
      {/* Main Disclaimer - Bold and Prominent */}
      <Text style={styles.mainDisclaimer}>
        Tool only • Not legal advice • Consult an attorney
      </Text>
      
      {/* Links */}
      {showLinks && (
        <View style={styles.linksContainer}>
          <TouchableOpacity onPress={handleTermsPress}>
            <Text style={styles.link}>Terms of Service</Text>
          </TouchableOpacity>
          <Text style={styles.separator}>|</Text>
          <TouchableOpacity onPress={handlePrivacyPress}>
            <Text style={styles.link}>Privacy Policy</Text>
          </TouchableOpacity>
        </View>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.md,
    backgroundColor: colors.gray800,
    borderTopWidth: 1,
    borderTopColor: colors.gray700,
  },
  mainDisclaimer: {
    ...typography.bodySmall,
    fontWeight: '700',
    color: colors.warningLight,
    textAlign: 'center',
    letterSpacing: 0.5,
  },
  linksContainer: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    marginTop: spacing.xs,
  },
  link: {
    ...typography.caption,
    color: colors.gray400,
    textDecorationLine: 'underline',
  },
  separator: {
    ...typography.caption,
    color: colors.gray500,
    marginHorizontal: spacing.sm,
  },
});

diff --git a/components/FirstUseDisclaimerModal.tsx b/PrelimPro-mobile/components/FirstUseDisclaimerModal.tsx
deleted file mode 100644
index fffffff..0000000
--- a/components/FirstUseDisclaimerModal.tsx
+++ /dev/null
 @@ -1,400 +0,0 @@
-[original file deleted]

diff --git a/components/FirstUseDisclaimerModal.tsx b/PrelimPro-mobile/components/FirstUseDisclaimerModal.tsx
new file mode 100644
index 0000000..ffffff
--- /dev/null
+++ b/PrelimPro-mobile/components/FirstUseDisclaimerModal.tsx
@@ -0,0 +1,400 @@
import React, { useState } from 'react';
import {
  View,
  Text,
  StyleSheet,
  Modal,
  ScrollView,
  TouchableOpacity,
  Linking,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography, shadows } from '../constants/theme';
import Button from './Button';

interface FirstUseDisclaimerModalProps {
  visible: boolean;
  onAccept: () => void;
}

export default function FirstUseDisclaimerModal({ 
  visible, 
  onAccept 
}: FirstUseDisclaimerModalProps) {
  const [agreed, setAgreed] = useState(false);

  const handleContinue = () => {
    if (agreed) {
      onAccept();
    }
  };

  const handleTermsPress = () => {
    Linking.openURL('https://prelimpro.com/terms');
  };

  const handlePrivacyPress = () => {
    Linking.openURL('https://prelimpro.com/privacy');
  };

  return (
    <Modal
      visible={visible}
      animationType="fade"
      transparent={false}
      statusBarTranslucent
    >
      <SafeAreaView style={styles.container}>
        <ScrollView 
          contentContainerStyle={styles.scrollContent}
          showsVerticalScrollIndicator={false}
        >
          {/* Header Icon */}
          <View style={styles.iconContainer}>
            <View style={styles.iconBackground}>
              <Ionicons name="shield-checkmark" size={48} color={colors.primary} />
            </View>
          </View>

          {/* Title */}
          <Text style={styles.title}>Important Legal Disclaimer</Text>
          <Text style={styles.subtitle}>Please read and acknowledge before continuing</Text>

          {/* Main Disclaimer Card */}
          <View style={styles.disclaimerCard}>
            <View style={styles.warningBanner}>
              <Ionicons name="warning" size={20} color={colors.warning} />
              <Text style={styles.warningBannerText}>PLEASE READ CAREFULLY</Text>
            </View>

            <Text style={styles.disclaimerText}>
              PrelimPro is a self-service tool providing general templates only. It does not 
              constitute legal advice. We are not a law firm or attorneys. No attorney-client 
              relationship is formed.
            </Text>

            <View style={styles.divider} />

            <Text style={styles.disclaimerText}>
              Laws change frequently. You are solely responsible for accuracy, timing, delivery, 
              verification, and all outcomes. Use at your own risk.
            </Text>

            <View style={styles.divider} />

            <Text style={[styles.disclaimerText, styles.highlightText]}>
              Consult a licensed attorney for your specific situation.
            </Text>
          </View>

          {/* Key Points */}
          <View style={styles.keyPointsContainer}>
            <Text style={styles.keyPointsTitle}>By using PrelimPro, you acknowledge:</Text>
            
            <View style={styles.keyPoint}>
              <View style={styles.bulletPoint} />
              <Text style={styles.keyPointText}>
                This is a <Text style={styles.bold}>template generation tool only</Text>
              </Text>
            </View>

            <View style={styles.keyPoint}>
              <View style={styles.bulletPoint} />
              <Text style={styles.keyPointText}>
                <Text style={styles.bold}>No legal advice</Text> is being provided
              </Text>
            </View>

            <View style={styles.keyPoint}>
              <View style={styles.bulletPoint} />
              <Text style={styles.keyPointText}>
                <Text style={styles.bold}>No attorney-client relationship</Text> is formed
              </Text>
            </View>

            <View style={styles.keyPoint}>
              <View style={styles.bulletPoint} />
              <Text style={styles.keyPointText}>
                You are <Text style={styles.bold}>solely responsible</Text> for all outcomes
              </Text>
            </View>

            <View style={styles.keyPoint}>
              <View style={styles.bulletPoint} />
              <Text style={styles.keyPointText}>
                Laws vary by state and <Text style={styles.bold}>change frequently</Text>
              </Text>
            </View>

            <View style={styles.keyPoint}>
              <View style={styles.bulletPoint} />
              <Text style={styles.keyPointText}>
                You should <Text style={styles.bold}>consult a licensed attorney</Text>
              </Text>
            </View>
          </View>

          {/* Checkbox Agreement */}
          <TouchableOpacity 
            style={styles.checkboxContainer}
            onPress={() => setAgreed(!agreed)}
            activeOpacity={0.7}
          >
            <View style={[styles.checkbox, agreed && styles.checkboxChecked]}>
              {agreed && <Ionicons name="checkmark" size={18} color={colors.textInverse} />}
            </View>
            <Text style={styles.checkboxLabel}>
              I understand and agree to these terms
            </Text>
          </TouchableOpacity>

          {/* Continue Button */}
          <Button
            title="Continue"
            onPress={handleContinue}
            disabled={!agreed}
            size="lg"
            style={styles.continueButton}
          />

          {/* Links */}
          <View style={styles.linksContainer}>
            <TouchableOpacity onPress={handleTermsPress}>
              <Text style={styles.link}>Terms of Service</Text>
            </TouchableOpacity>
            <Text style={styles.linkSeparator}>•</Text>
            <TouchableOpacity onPress={handlePrivacyPress}>
              <Text style={styles.link}>Privacy Policy</Text>
            </TouchableOpacity>
          </View>
        </ScrollView>
      </SafeAreaView>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: colors.background,
  },
  scrollContent: {
    padding: spacing.lg,
    paddingBottom: spacing.xxl,
  },
  iconContainer: {
    alignItems: 'center',
    marginTop: spacing.xl,
    marginBottom: spacing.lg,
  },
  iconBackground: {
    width: 96,
    height: 96,
    borderRadius: 48,
    backgroundColor: colors.primaryLight + '20',
    justifyContent: 'center',
    alignItems: 'center',
  },
  title: {
    ...typography.h1,
    color: colors.textPrimary,
    textAlign: 'center',
    marginBottom: spacing.sm,
  },
  subtitle: {
    ...typography.body,
    color: colors.textSecondary,
    textAlign: 'center',
    marginBottom: spacing.xl,
  },
  disclaimerCard: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    marginBottom: spacing.lg,
    borderWidth: 2,
    borderColor: colors.warning,
    ...shadows.md,
  },
  warningBanner: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: colors.warningLight,
    marginHorizontal: -spacing.lg,
    marginTop: -spacing.lg,
    marginBottom: spacing.lg,
    paddingVertical: spacing.sm,
    borderTopLeftRadius: borderRadius.lg - 2,
    borderTopRightRadius: borderRadius.lg - 2,
  },
  warningBannerText: {
    ...typography.bodyBold,
    color: colors.warning,
    marginLeft: spacing.sm,
    letterSpacing: 1,
  },
  disclaimerText: {
    ...typography.body,
    color: colors.textPrimary,
    lineHeight: 24,
    textAlign: 'center',
  },
  highlightText: {
    fontWeight: '700',
    color: colors.primary,
  },
  divider: {
    height: 1,
    backgroundColor: colors.gray200,
    marginVertical: spacing.md,
  },
  keyPointsContainer: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    marginBottom: spacing.xl,
    ...shadows.sm,
  },
  keyPointsTitle: {
    ...typography.bodyBold,
    color: colors.textPrimary,
    marginBottom: spacing.md,
  },
  keyPoint: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    marginBottom: spacing.sm,
  },
  bulletPoint: {
    width: 8,
    height: 8,
    borderRadius: 4,
    backgroundColor: colors.primary,
    marginTop: 7,
    marginRight: spacing.sm,
  },
  keyPointText: {
    ...typography.body,
    color: colors.textSecondary,
    flex: 1,
    lineHeight: 22,
  },
  bold: {
    fontWeight: '700',
    color: colors.textPrimary,
  },
  checkboxContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.surface,
    padding: spacing.lg,
    borderRadius: borderRadius.lg,
    marginBottom: spacing.lg,
    borderWidth: 2,
    borderColor: colors.gray200,
    ...shadows.sm,
  },
  checkbox: {
    width: 28,
    height: 28,
    borderRadius: borderRadius.sm,
    borderWidth: 2,
    borderColor: colors.gray300,
    marginRight: spacing.md,
    justifyContent: 'center',
    alignItems: 'center',
  },
  checkboxChecked: {
    backgroundColor: colors.primary,
    borderColor: colors.primary,
  },
  checkboxLabel: {
    ...typography.bodyBold,
    color: colors.textPrimary,
    flex: 1,
  },
  continueButton: {
    marginBottom: spacing.lg,
  },
  linksContainer: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
  },
  link: {
    ...typography.bodySmall,
    color: colors.primary,
    textDecorationLine: 'underline',
  },
  linkSeparator: {
    ...typography.bodySmall,
    color: colors.gray400,
    marginHorizontal: spacing.sm,
  },
});

diff --git a/components/GenerateNoticeModal.tsx b/PrelimPro-mobile/components/GenerateNoticeModal.tsx
deleted file mode 100644
index 1234567..0000000
--- a/components/GenerateNoticeModal.tsx
+++ /dev/null
 @@ -1,400 +0,0 @@
-[original file deleted]

diff --git a/components/GenerateNoticeModal.tsx b/PrelimPro-mobile/components/GenerateNoticeModal.tsx
new file mode 100644
index 0000000..1234567
--- /dev/null
+++ b/PrelimPro-mobile/components/GenerateNoticeModal.tsx
@@ -0,0 +1,400 @@
import React, { useState } from 'react';
import {
  View,
  Text,
  StyleSheet,
  Modal,
  TouchableOpacity,
  ScrollView,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography, shadows } from '../constants/theme';
import Button from './Button';

interface GenerateNoticeModalProps {
  visible: boolean;
  onAccept: () => void;
  onCancel: () => void;
  actionType?: 'generate' | 'preview' | 'send';
}

export default function GenerateNoticeModal({ 
  visible, 
  onAccept, 
  onCancel,
  actionType = 'generate'
}: GenerateNoticeModalProps) {
  const [accepted, setAccepted] = useState(false);

  const handleAccept = () => {
    if (accepted) {
      setAccepted(false); // Reset for next time
      onAccept();
    }
  };

  const handleCancel = () => {
    setAccepted(false); // Reset for next time
    onCancel();
  };

  const getActionText = () => {
    switch (actionType) {
      case 'preview':
        return 'preview this notice';
      case 'send':
        return 'send this notice';
      default:
        return 'generate this notice';
    }
  };

  return (
    <Modal
      visible={visible}
      animationType="slide"
      transparent={true}
      onRequestClose={handleCancel}
    >
      <View style={styles.overlay}>
        <View style={styles.modalContainer}>
          <ScrollView showsVerticalScrollIndicator={false}>
            {/* Warning Header */}
            <View style={styles.warningHeader}>
              <View style={styles.warningIconContainer}>
                <Ionicons name="warning" size={32} color={colors.warning} />
              </View>
              <Text style={styles.warningTitle}>Important Notice</Text>
            </View>

            {/* Warning Message */}
            <View style={styles.warningCard}>
              <Text style={styles.warningText}>
                This generates a <Text style={styles.bold}>template only</Text>.
              </Text>
              
              <View style={styles.warningDivider} />
              
              <Text style={styles.warningText}>
                Verify all information and current law before use.
              </Text>
              
              <View style={styles.warningDivider} />
              
              <Text style={[styles.warningText, styles.emphasisText]}>
                We make no guarantees of validity or lien rights.
              </Text>
            </View>

            {/* Responsibility Checklist */}
            <View style={styles.checklistContainer}>
              <Text style={styles.checklistTitle}>Before proceeding, ensure you have:</Text>
              
              <View style={styles.checklistItem}>
                <Ionicons name="checkmark-circle-outline" size={20} color={colors.gray400} />
                <Text style={styles.checklistText}>Verified all entered information is accurate</Text>
              </View>
              
              <View style={styles.checklistItem}>
                <Ionicons name="checkmark-circle-outline" size={20} color={colors.gray400} />
                <Text style={styles.checklistText}>Confirmed current state law requirements</Text>
              </View>
              
              <View style={styles.checklistItem}>
                <Ionicons name="checkmark-circle-outline" size={20} color={colors.gray400} />
                <Text style={styles.checklistText}>Understood your filing deadlines</Text>
              </View>
              
              <View style={styles.checklistItem}>
                <Ionicons name="checkmark-circle-outline" size={20} color={colors.gray400} />
                <Text style={styles.checklistText}>Consulted an attorney if needed</Text>
              </View>
            </View>

            {/* Acceptance Checkbox */}
            <TouchableOpacity 
              style={[styles.acceptanceContainer, accepted && styles.acceptanceContainerChecked]}
              onPress={() => setAccepted(!accepted)}
              activeOpacity={0.7}
            >
              <View style={[styles.checkbox, accepted && styles.checkboxChecked]}>
                {accepted && <Ionicons name="checkmark" size={18} color={colors.textInverse} />}
              </View>
              <Text style={styles.acceptanceText}>
                I accept full responsibility for verifying this notice and its use
              </Text>
            </TouchableOpacity>

            {/* Action Buttons */}
            <View style={styles.buttonContainer}>
              <Button
                title="Cancel"
                onPress={handleCancel}
                variant="outline"
                style={styles.cancelButton}
              />
              <Button
                title={`Proceed to ${actionType === 'preview' ? 'Preview' : actionType === 'send' ? 'Send' : 'Generate'}`}
                onPress={handleAccept}
                disabled={!accepted}
                style={styles.proceedButton}
              />
            </View>

            {/* Footer Note */}
            <Text style={styles.footerNote}>
              This acknowledgment is required each time you {getActionText()}.
            </Text>
          </ScrollView>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  overlay: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.6)',
    justifyContent: 'flex-end',
  },
  modalContainer: {
    backgroundColor: colors.surface,
    borderTopLeftRadius: borderRadius.xl,
    borderTopRightRadius: borderRadius.xl,
    padding: spacing.lg,
    maxHeight: '90%',
    ...shadows.lg,
  },
  warningHeader: {
    alignItems: 'center',
    marginBottom: spacing.lg,
  },
  warningIconContainer: {
    width: 64,
    height: 64,
    borderRadius: 32,
    backgroundColor: colors.warningLight,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: spacing.md,
  },
  warningTitle: {
    ...typography.h2,
    color: colors.textPrimary,
    textAlign: 'center',
  },
  warningCard: {
    backgroundColor: colors.warningLight,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    marginBottom: spacing.lg,
    borderLeftWidth: 4,
    borderLeftColor: colors.warning,
  },
  warningText: {
    ...typography.body,
    color: colors.textPrimary,
    textAlign: 'center',
    lineHeight: 24,
  },
  warningDivider: {
    height: 1,
    backgroundColor: colors.warning + '30',
    marginVertical: spacing.sm,
  },
  bold: {
    fontWeight: '700',
  },
  emphasisText: {
    fontWeight: '700',
    color: colors.warning,
  },
  checklistContainer: {
    backgroundColor: colors.gray50,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    marginBottom: spacing.lg,
  },
  checklistTitle: {
    ...typography.bodyBold,
    color: colors.textPrimary,
    marginBottom: spacing.md,
  },
  checklistItem: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    marginBottom: spacing.sm,
  },
  checklistText: {
    ...typography.bodySmall,
    color: colors.textSecondary,
    marginLeft: spacing.sm,
    flex: 1,
    lineHeight: 20,
  },
  acceptanceContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.surface,
    padding: spacing.lg,
    borderRadius: borderRadius.lg,
    marginBottom: spacing.lg,
    borderWidth: 2,
    borderColor: colors.gray200,
  },
  acceptanceContainerChecked: {
    borderColor: colors.primary,
    backgroundColor: colors.primaryLight + '10',
  },
  checkbox: {
    width: 26,
    height: 26,
    borderRadius: borderRadius.sm,
    borderWidth: 2,
    borderColor: colors.gray300,
    marginRight: spacing.md,
    justifyContent: 'center',
    alignItems: 'center',
  },
  checkboxChecked: {
    backgroundColor: colors.primary,
    borderColor: colors.primary,
  },
  acceptanceText: {
    ...typography.bodyBold,
    color: colors.textPrimary,
    flex: 1,
    lineHeight: 22,
  },
  buttonContainer: {
    flexDirection: 'row',
    marginBottom: spacing.md,
  },
  cancelButton: {
    flex: 1,
    marginRight: spacing.sm,
  },
  proceedButton: {
    flex: 2,
  },
  footerNote: {
    ...typography.caption,
    color: colors.textMuted,
    textAlign: 'center',
    fontStyle: 'italic',
    marginBottom: spacing.md,
  },
});

diff --git a/components/NotificationBanner.tsx b/PrelimPro-mobile/components/NotificationBanner.tsx
deleted file mode 100644
index 8888888..0000000
--- a/components/NotificationBanner.tsx
+++ /dev/null
 @@ -1,200 +0,0 @@
-[original file deleted]

diff --git a/components/NotificationBanner.tsx b/PrelimPro-mobile/components/NotificationBanner.tsx
new file mode 100644
index 0000000..8888888
--- /dev/null
+++ b/PrelimPro-mobile/components/NotificationBanner.tsx
@@ -0,0 +1,200 @@
import React from 'react';
import { View, Text, StyleSheet, TouchableOpacity, Linking, Platform } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography } from '../constants/theme';
import { useNotifications } from '../contexts/NotificationContext';

interface NotificationBannerProps {
  onDismiss?: () => void;
}

export default function NotificationBanner({ onDismiss }: NotificationBannerProps) {
  const { permissionStatus, requestPermissions } = useNotifications();

  const handleEnableNotifications = async () => {
    if (permissionStatus === 'denied') {
      // If denied, open settings
      if (Platform.OS === 'ios') {
        Linking.openURL('app-settings:');
      } else {
        Linking.openSettings();
      }
    } else {
      await requestPermissions();
    }
  };

  // Don't show if already granted or still loading
  if (permissionStatus === 'granted' || permissionStatus === 'loading') {
    return null;
  }

  return (
    <View style={styles.container}>
      <View style={styles.iconContainer}>
        <Ionicons name="notifications" size={24} color={colors.warning} />
      </View>
      
      <View style={styles.content}>
        <Text style={styles.title}>
          {permissionStatus === 'denied' 
            ? 'Notifications Disabled' 
            : 'Enable Deadline Reminders'}
        </Text>
        <Text style={styles.description}>
          {permissionStatus === 'denied'
            ? 'Open settings to enable notifications and never miss a filing deadline.'
            : 'Get reminders 7, 3, and 1 day before your preliminary notice deadlines.'}
        </Text>
        
        <View style={styles.actions}>
          <TouchableOpacity 
            style={styles.enableButton}
            onPress={handleEnableNotifications}
          >
            <Text style={styles.enableButtonText}>
              {permissionStatus === 'denied' ? 'Open Settings' : 'Enable'}
            </Text>
          </TouchableOpacity>
          
          {onDismiss && (
            <TouchableOpacity 
              style={styles.dismissButton}
              onPress={onDismiss}
            >
              <Text style={styles.dismissButtonText}>Not Now</Text>
            </TouchableOpacity>
          )}
        </View>
      </View>
      
      {onDismiss && (
        <TouchableOpacity style={styles.closeButton} onPress={onDismiss}>
          <Ionicons name="close" size={20} color={colors.gray400} />
        </TouchableOpacity>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    backgroundColor: colors.warningLight,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    marginHorizontal: spacing.lg,
    marginVertical: spacing.sm,
    borderWidth: 1,
    borderColor: colors.warning,
  },
  iconContainer: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: colors.surface,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: spacing.md,
  },
  content: {
    flex: 1,
  },
  title: {
    ...typography.body,
    fontWeight: '600',
    color: colors.textPrimary,
    marginBottom: spacing.xs,
  },
  description: {
    ...typography.bodySmall,
    color: colors.textSecondary,
    marginBottom: spacing.sm,
  },
  actions: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: spacing.sm,
  },
  enableButton: {
    backgroundColor: colors.warning,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.md,
    borderRadius: borderRadius.md,
  },
  enableButtonText: {
    ...typography.bodySmall,
    fontWeight: '600',
    color: colors.textInverse,
  },
  dismissButton: {
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.sm,
  },
  dismissButtonText: {
    ...typography.bodySmall,
    color: colors.textSecondary,
  },
  closeButton: {
    padding: spacing.xs,
    marginLeft: spacing.xs,
  },
});

diff --git a/components/Input.tsx b/PrelimPro-mobile/components/Input.tsx
deleted file mode 100644
index 9998887..0000000
--- a/components/Input.tsx
+++ /dev/null
 @@ -1,200 +0,0 @@
-[original file deleted]

diff --git a/components/Input.tsx b/PrelimPro-mobile/components/Input.tsx
new file mode 100644
index 0000000..9998887
--- /dev/null
+++ b/PrelimPro-mobile/components/Input.tsx
@@ -0,0 +1,200 @@
import React, { useState } from 'react';
import { View, Text, TextInput, StyleSheet, TouchableOpacity, TextInputProps } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography } from '../constants/theme';

interface InputProps extends TextInputProps {
  label?: string;
  error?: string;
  helperText?: string;
  leftIcon?: keyof typeof Ionicons.glyphMap;
  rightIcon?: keyof typeof Ionicons.glyphMap;
  onRightIconPress?: () => void;
  required?: boolean;
}

export default function Input({
  label,
  error,
  helperText,
  leftIcon,
  rightIcon,
  onRightIconPress,
  required,
  style,
  ...props
}: InputProps) {
  const [isFocused, setIsFocused] = useState(false);

  return (
    <View style={styles.container}>
      {label && (
        <Text style={styles.label}>
          {label}
          {required && <Text style={styles.required}> *</Text>}
        </Text>
      )}
      <View
        style={[
          styles.inputContainer,
          isFocused && styles.inputFocused,
          error && styles.inputError,
        ]}
      >
        {leftIcon && (
          <Ionicons
            name={leftIcon}
            size={20}
            color={colors.gray400}
            style={styles.leftIcon}
          />
        )}
        <TextInput
          style={[styles.input, leftIcon && styles.inputWithLeftIcon, style]}
          placeholderTextColor={colors.gray400}
          onFocus={() => setIsFocused(true)}
          onBlur={() => setIsFocused(false)}
          {...props}
        />
        {rightIcon && (
          <TouchableOpacity onPress={onRightIconPress} style={styles.rightIcon}>
            <Ionicons name={rightIcon} size={20} color={colors.gray400} />
          </TouchableOpacity>
        )}
      </View>
      {error && <Text style={styles.errorText}>{error}</Text>}
      {helperText && !error && <Text style={styles.helperText}>{helperText}</Text>}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    marginBottom: spacing.md,
  },
  label: {
    ...typography.bodySmall,
    fontWeight: '500',
    color: colors.textPrimary,
    marginBottom: spacing.xs,
  },
  required: {
    color: colors.error,
  },
  inputContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.surface,
    borderWidth: 1,
    borderColor: colors.gray300,
    borderRadius: borderRadius.lg,
    overflow: 'hidden',
  },
  inputFocused: {
    borderColor: colors.primary,
    borderWidth: 2,
  },
  inputError: {
    borderColor: colors.error,
  },
  input: {
    flex: 1,
    paddingVertical: spacing.md,
    paddingHorizontal: spacing.md,
    ...typography.body,
    color: colors.textPrimary,
  },
  inputWithLeftIcon: {
    paddingLeft: spacing.xs,
  },
  leftIcon: {
    marginLeft: spacing.md,
  },
  rightIcon: {
    padding: spacing.md,
  },
  errorText: {
    ...typography.caption,
    color: colors.error,
    marginTop: spacing.xs,
  },
  helperText: {
    ...typography.caption,
    color: colors.textMuted,
    marginTop: spacing.xs,
  },
});

diff --git a/components/ReminderStatus.tsx b/PrelimPro-mobile/components/ReminderStatus.tsx
deleted file mode 100644
index 7777777..0000000
--- a/components/ReminderStatus.tsx
+++ /dev/null
 @@ -1,400 +0,0 @@
-[original file deleted]

diff --git a/components/ReminderStatus.tsx b/PrelimPro-mobile/components/ReminderStatus.tsx
new file mode 100644
index 0000000..7777777
--- /dev/null
+++ b/PrelimPro-mobile/components/ReminderStatus.tsx
@@ -0,0 +1,400 @@
import React, { useState, useEffect } from 'react';
import { View, Text, StyleSheet, TouchableOpacity, ActivityIndicator } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography } from '../constants/theme';
import { 
  getProjectReminder, 
  scheduleDeadlineReminders, 
  cancelProjectReminders,
  ScheduledReminder 
} from '../lib/notifications';
import { Project } from '../lib/supabase';
import { useNotifications } from '../contexts/NotificationContext';

interface ReminderStatusProps {
  project: Project;
  compact?: boolean;
  onReminderChange?: () => void;
}

export default function ReminderStatus({ project, compact = false, onReminderChange }: ReminderStatusProps) {
  const [reminder, setReminder] = useState<ScheduledReminder | null>(null);
  const [loading, setLoading] = useState(true);
  const [toggling, setToggling] = useState(false);
  
  const { permissionStatus, requestPermissions } = useNotifications();

  useEffect(() => {
    loadReminder();
  }, [project.id]);

  const loadReminder = async () => {
    setLoading(true);
    const storedReminder = await getProjectReminder(project.id);
    setReminder(storedReminder);
    setLoading(false);
  };

  const handleToggleReminders = async () => {
    if (toggling) return;
    
    setToggling(true);
    
    try {
      if (reminder) {
        // Cancel existing reminders
        await cancelProjectReminders(project.id);
        setReminder(null);
      } else {
        // Check permission first
        if (permissionStatus !== 'granted') {
          const granted = await requestPermissions();
          if (!granted) {
            setToggling(false);
            return;
          }
        }
        
        // Schedule new reminders
        const newReminder = await scheduleDeadlineReminders(project);
        setReminder(newReminder);
      }
      
      onReminderChange?.();
    } catch (error) {
      console.error('Error toggling reminders:', error);
    } finally {
      setToggling(false);
    }
  };

  // Don't show for projects without deadlines or notice requirements
  if (!project.deadline || !project.notice_required) {
    return null;
  }

  // Check if deadline has passed
  const deadlineDate = new Date(project.deadline);
  if (deadlineDate < new Date()) {
    return null;
  }

  if (loading) {
    return (
      <View style={[styles.container, compact && styles.containerCompact]}>
        <ActivityIndicator size="small" color={colors.primary} />
      </View>
    );
  }

  const hasReminders = !!reminder;
  const scheduledCount = reminder 
    ? Object.values(reminder.notificationIds).filter(Boolean).length 
    : 0;

  if (compact) {
    return (
      <TouchableOpacity 
        style={[
          styles.compactButton,
          hasReminders && styles.compactButtonActive
        ]}
        onPress={handleToggleReminders}
        disabled={toggling}
      >
        {toggling ? (
          <ActivityIndicator size="small" color={hasReminders ? colors.primary : colors.gray400} />
        ) : (
          <Ionicons 
            name={hasReminders ? 'notifications' : 'notifications-outline'} 
            size={18} 
            color={hasReminders ? colors.primary : colors.gray400} 
          />
        )}
      </TouchableOpacity>
    );
  }

  return (
    <View style={styles.container}>
      <View style={styles.header}>
        <View style={styles.iconContainer}>
          <Ionicons 
            name={hasReminders ? 'notifications' : 'notifications-outline'} 
            size={20} 
            color={hasReminders ? colors.primary : colors.gray400} 
          />
        </View>
        <View style={styles.textContainer}>
          <Text style={styles.title}>Deadline Reminders</Text>
          <Text style={styles.subtitle}>
            {hasReminders 
              ? `${scheduledCount} reminder${scheduledCount !== 1 ? 's' : ''} scheduled`
              : 'No reminders set'}
          </Text>
        </View>
        <TouchableOpacity 
          style={[styles.toggleButton, hasReminders && styles.toggleButtonActive]}
          onPress={handleToggleReminders}
          disabled={toggling}
        >
          {toggling ? (
            <ActivityIndicator size="small" color={colors.textInverse} />
          ) : (
            <Text style={styles.toggleButtonText}>
              {hasReminders ? 'Disable' : 'Enable'}
            </Text>
          )}
        </TouchableOpacity>
      </View>
      
      {hasReminders && reminder && (
        <View style={styles.reminderDetails}>
          {reminder.notificationIds.sevenDay && (
            <View style={styles.reminderItem}>
              <Ionicons name="checkmark-circle" size={14} color={colors.success} />
              <Text style={styles.reminderItemText}>7 days before</Text>
            </View>
          )}
          {reminder.notificationIds.threeDay && (
            <View style={styles.reminderItem}>
              <Ionicons name="checkmark-circle" size={14} color={colors.success} />
              <Text style={styles.reminderItemText}>3 days before</Text>
            </View>
          )}
          {reminder.notificationIds.oneDay && (
            <View style={styles.reminderItem}>
              <Ionicons name="checkmark-circle" size={14} color={colors.success} />
              <Text style={styles.reminderItemText}>1 day before</Text>
            </View>
          )}
        </View>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    borderWidth: 1,
    borderColor: colors.gray200,
  },
  containerCompact: {
    padding: spacing.sm,
    backgroundColor: 'transparent',
    borderWidth: 0,
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  iconContainer: {
    width: 36,
    height: 36,
    borderRadius: 18,
    backgroundColor: colors.gray100,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: spacing.sm,
  },
  textContainer: {
    flex: 1,
  },
  title: {
    ...typography.body,
    fontWeight: '600',
    color: colors.textPrimary,
  },
  subtitle: {
    ...typography.caption,
    color: colors.textSecondary,
  },
  toggleButton: {
    backgroundColor: colors.primary,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.md,
    borderRadius: borderRadius.md,
    minWidth: 80,
    alignItems: 'center',
  },
  toggleButtonActive: {
    backgroundColor: colors.gray400,
  },
  toggleButtonText: {
    ...typography.bodySmall,
    fontWeight: '600',
    color: colors.textInverse,
  },
  reminderDetails: {
    marginTop: spacing.md,
    paddingTop: spacing.md,
    borderTopWidth: 1,
    borderTopColor: colors.gray100,
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: spacing.sm,
  },
  reminderItem: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.successLight,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.sm,
    borderRadius: borderRadius.full,
  },
  reminderItemText: {
    ...typography.caption,
    color: colors.success,
    marginLeft: spacing.xs,
    fontWeight: '500',
  },
  compactButton: {
    width: 32,
    height: 32,
    borderRadius: 16,
    backgroundColor: colors.gray100,
    justifyContent: 'center',
    alignItems: 'center',
  },
  compactButtonActive: {
    backgroundColor: colors.primaryLight + '20',
  },
});

diff --git a/components/UpgradeModal.tsx b/PrelimPro-mobile/components/UpgradeModal.tsx
deleted file mode 100644
index 6665554..0000000
--- a/components/UpgradeModal.tsx
+++ /dev/null
 @@ -1,300 +0,0 @@
-[original file deleted]

diff --git a/components/UpgradeModal.tsx b/PrelimPro-mobile/components/UpgradeModal.tsx
new file mode 100644
index 0000000..6665554
--- /dev/null
+++ b/PrelimPro-mobile/components/UpgradeModal.tsx
@@ -0,0 +1,300 @@
import React from 'react';
import {
  View,
  Text,
  StyleSheet,
  Modal,
  TouchableOpacity,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { useRouter } from 'expo-router';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography, shadows } from '../constants/theme';
import Button from './Button';
import { usePlan } from '../contexts/PlanContext';

interface UpgradeModalProps {
  visible: boolean;
  onClose: () => void;
  title?: string;
  message?: string;
}

export default function UpgradeModal({ 
  visible, 
  onClose,
  title = 'Upgrade Required',
  message = "You've used all your free notices. Upgrade to continue creating notices."
}: UpgradeModalProps) {
  const router = useRouter();
  const { plan } = usePlan();

  const handleUpgrade = () => {
    onClose();
    router.push('/(app)/pricing');
  };

  return (
    <Modal
      visible={visible}
      animationType="fade"
      transparent
      onRequestClose={onClose}
    >
      <View style={styles.overlay}>
        <View style={styles.container}>
          <TouchableOpacity style={styles.closeButton} onPress={onClose}>
            <Ionicons name="close" size={24} color={colors.gray500} />
          </TouchableOpacity>

          <View style={styles.iconContainer}>
            <Ionicons name="lock-closed" size={48} color={colors.warning} />
          </View>

          <Text style={styles.title}>{title}</Text>
          <Text style={styles.message}>{message}</Text>

          {plan && (
            <View style={styles.usageInfo}>
              <View style={styles.usageRow}>
                <Text style={styles.usageLabel}>Notices Used</Text>
                <Text style={styles.usageValue}>{plan.notices_used}</Text>
              </View>
              <View style={styles.usageRow}>
                <Text style={styles.usageLabel}>Free Limit</Text>
                <Text style={styles.usageValue}>3</Text>
              </View>
              {plan.notices_purchased > 0 && (
                <View style={styles.usageRow}>
                  <Text style={styles.usageLabel}>Purchased</Text>
                  <Text style={styles.usageValue}>{plan.notices_purchased}</Text>
                </View>
              )}
            </View>
          )}

          <View style={styles.optionsContainer}>
            <View style={styles.optionCard}>
              <View style={styles.optionHeader}>
                <Text style={styles.optionTitle}>Pay Per Notice</Text>
                <Text style={styles.optionPrice}>$19</Text>
              </View>
              <Text style={styles.optionDescription}>
                Buy individual notices as needed
              </Text>
            </View>

            <View style={[styles.optionCard, styles.optionCardHighlighted]}>
              <View style={styles.recommendedBadge}>
                <Text style={styles.recommendedText}>RECOMMENDED</Text>
              </View>
              <View style={styles.optionHeader}>
                <Text style={styles.optionTitle}>Pro Plan</Text>
                <Text style={styles.optionPrice}>$39/mo</Text>
              </View>
              <Text style={styles.optionDescription}>
                Unlimited notices + premium features
              </Text>
            </View>
          </View>

          <Button
            title="View Pricing Options"
            onPress={handleUpgrade}
            style={styles.upgradeButton}
          />

          <TouchableOpacity onPress={onClose} style={styles.laterButton}>
            <Text style={styles.laterText}>Maybe Later</Text>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  overlay: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    justifyContent: 'center',
    alignItems: 'center',
    padding: spacing.lg,
  },
  container: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.xl,
    padding: spacing.xl,
    width: '100%',
    maxWidth: 400,
    alignItems: 'center',
    ...shadows.lg,
  },
  closeButton: {
    position: 'absolute',
    top: spacing.md,
    right: spacing.md,
    padding: spacing.xs,
  },
  iconContainer: {
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: colors.warningLight,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: spacing.lg,
  },
  title: {
    ...typography.h2,
    color: colors.textPrimary,
    textAlign: 'center',
    marginBottom: spacing.sm,
  },
  message: {
    ...typography.body,
    color: colors.textSecondary,
    textAlign: 'center',
    marginBottom: spacing.lg,
  },
  usageInfo: {
    width: '100%',
    backgroundColor: colors.gray50,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    marginBottom: spacing.lg,
  },
  usageRow: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    marginBottom: spacing.xs,
  },
  usageLabel: {
    ...typography.bodySmall,
    color: colors.textSecondary,
  },
  usageValue: {
    ...typography.bodyBold,
    color: colors.textPrimary,
  },
  optionsContainer: {
    width: '100%',
    gap: spacing.sm,
    marginBottom: spacing.lg,
  },
  optionCard: {
    backgroundColor: colors.gray50,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    borderWidth: 1,
    borderColor: colors.gray200,
  },
  optionCardHighlighted: {
    borderColor: colors.primary,
    borderWidth: 2,
    backgroundColor: colors.primaryLight + '10',
  },
  recommendedBadge: {
    position: 'absolute',
    top: -10,
    right: spacing.md,
    backgroundColor: colors.primary,
    paddingHorizontal: spacing.sm,
    paddingVertical: 2,
    borderRadius: borderRadius.full,
  },
  recommendedText: {
    ...typography.caption,
    fontSize: 10,
    color: colors.textInverse,
    fontWeight: '700',
  },
  optionHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: spacing.xs,
  },
  optionTitle: {
    ...typography.bodyBold,
    color: colors.textPrimary,
  },
  optionPrice: {
    ...typography.h3,
    color: colors.primary,
  },
  optionDescription: {
    ...typography.caption,
    color: colors.textSecondary,
  },
  upgradeButton: {
    width: '100%',
    marginBottom: spacing.sm,
  },
  laterButton: {
    padding: spacing.sm,
  },
  laterText: {
    ...typography.body,
    color: colors.textSecondary,
  },
});

diff --git a/components/ComplianceStatusBadge.tsx b/PrelimPro-mobile/components/ComplianceStatusBadge.tsx
deleted file mode 100644
index 4443332..0000000
--- a/components/ComplianceStatusBadge.tsx
+++ /dev/null
 @@ -1,800 +0,0 @@
-[original file deleted]

diff --git a/components/ComplianceStatusBadge.tsx b/PrelimPro-mobile/components/ComplianceStatusBadge.tsx
new file mode 100644
index 0000000..4443332
--- /dev/null
+++ b/PrelimPro-mobile/components/ComplianceStatusBadge.tsx
@@ -0,0 +1,800 @@
import React, { useState, useEffect, useCallback } from 'react';
import { View, Text, StyleSheet, ActivityIndicator } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { colors, spacing, borderRadius, typography, shadows } from '../constants/theme';
import { supabase } from '../lib/supabase';

// Compliance step types matching audit log event types
export type ComplianceStep = 'notice' | 'signature' | 'delivery' | 'proof';

export interface ComplianceStatus {
  noticeGenerated: boolean;
  proofOfServiceSigned: boolean;
  deliveryRecorded: boolean;
  proofUploaded: boolean;
  isComplete: boolean;
}

interface ComplianceStatusBadgeProps {
  projectId: string;
  variant?: 'compact' | 'full' | 'inline';
  showLabels?: boolean;
  onStatusChange?: (status: ComplianceStatus) => void;
}

// Step configuration
const complianceSteps = [
  { 
    key: 'noticeGenerated' as const, 
    eventType: 'notice', 
    label: 'Notice Generated',
    shortLabel: 'Notice',
    icon: 'document-text' as const
  },
  { 
    key: 'proofOfServiceSigned' as const, 
    eventType: 'signature', 
    label: 'Proof of Service Signed',
    shortLabel: 'Signed',
    icon: 'create' as const
  },
  { 
    key: 'deliveryRecorded' as const, 
    eventType: 'delivery', 
    label: 'Delivery Recorded',
    shortLabel: 'Delivered',
    icon: 'send' as const
  },
  { 
    key: 'proofUploaded' as const, 
    eventType: 'proof', 
    label: 'Proof Uploaded',
    shortLabel: 'Proof',
    icon: 'shield-checkmark' as const
  },
];

// Gold color for complete status
const goldColor = '#D4AF37';
const goldLightColor = '#FDF6E3';

export default function ComplianceStatusBadge({ 
  projectId, 
  variant = 'compact',
  showLabels = true,
  onStatusChange 
}: ComplianceStatusBadgeProps) {
  const [status, setStatus] = useState<ComplianceStatus>({
    noticeGenerated: false,
    proofOfServiceSigned: false,
    deliveryRecorded: false,
    proofUploaded: false,
    isComplete: false,
  });
  const [loading, setLoading] = useState(true);

  const fetchComplianceStatus = useCallback(async () => {
    if (!projectId) {
      setLoading(false);
      return;
    }

    try {
      // Query the project_audit_logs table for this project's events
      const { data, error } = await supabase
        .from('project_audit_logs')
        .select('event_type')
        .eq('project_id', projectId);

      if (error) {
        // If table doesn't exist or other error, use mock data for demo
        console.log('Using mock compliance data:', error.message);
        setMockStatus();
        return;
      }

      // Extract unique event types
      const eventTypes = new Set(data?.map(log => log.event_type) || []);

      const newStatus: ComplianceStatus = {
        noticeGenerated: eventTypes.has('notice'),
        proofOfServiceSigned: eventTypes.has('signature'),
        deliveryRecorded: eventTypes.has('delivery'),
        proofUploaded: eventTypes.has('proof'),
        isComplete: false,
      };

      // Check if all steps are complete
      newStatus.isComplete = 
        newStatus.noticeGenerated && 
        newStatus.proofOfServiceSigned && 
        newStatus.deliveryRecorded && 
        newStatus.proofUploaded;

      setStatus(newStatus);
      onStatusChange?.(newStatus);
    } catch (error) {
      console.error('Error fetching compliance status:', error);
      setMockStatus();
    } finally {
      setLoading(false);
    }
  }, [projectId, onStatusChange]);

  // Mock status for demo purposes when database is not available
  const setMockStatus = () => {
    // Generate random completion status for demo
    const random = Math.random();
    let mockStatus: ComplianceStatus;

    if (random < 0.2) {
      // 20% - All complete
      mockStatus = {
        noticeGenerated: true,
        proofOfServiceSigned: true,
        deliveryRecorded: true,
        proofUploaded: true,
        isComplete: true,
      };
    } else if (random < 0.5) {
      // 30% - Partially complete
      mockStatus = {
        noticeGenerated: true,
        proofOfServiceSigned: true,
        deliveryRecorded: true,
        proofUploaded: false,
        isComplete: false,
      };
    } else if (random < 0.75) {
      // 25% - Notice only
      mockStatus = {
        noticeGenerated: true,
        proofOfServiceSigned: false,
        deliveryRecorded: false,
        proofUploaded: false,
        isComplete: false,
      };
    } else {
      // 25% - Nothing complete
      mockStatus = {
        noticeGenerated: false,
        proofOfServiceSigned: false,
        deliveryRecorded: false,
        proofUploaded: false,
        isComplete: false,
      };
    }

    setStatus(mockStatus);
    onStatusChange?.(mockStatus);
  };

  useEffect(() => {
    fetchComplianceStatus();
  }, [fetchComplianceStatus]);

  if (loading) {
    return (
      <View style={styles.loadingContainer}>
        <ActivityIndicator size="small" color={colors.primary} />
      </View>
    );
  }

  // Count completed steps
  const completedCount = [
    status.noticeGenerated,
    status.proofOfServiceSigned,
    status.deliveryRecorded,
    status.proofUploaded,
  ].filter(Boolean).length;

  // Render based on variant
  if (variant === 'inline') {
    return (
      <View style={styles.inlineContainer}>
        {status.isComplete ? (
          <View style={[styles.inlineBadge, styles.inlineBadgeComplete]}>
            <Ionicons name="flag" size={12} color={goldColor} />
            <Text style={[styles.inlineText, styles.inlineTextComplete]}>Complete</Text>
          </View>
        ) : (
          <View style={styles.inlineBadge}>
            <Ionicons name="checkmark-circle" size={12} color={colors.success} />
            <Text style={styles.inlineText}>{completedCount}/4</Text>
          </View>
        )}
      </View>
    );
  }

  if (variant === 'compact') {
    return (
      <View style={styles.compactContainer}>
        {status.isComplete ? (
          <View style={[styles.compactBadge, styles.compactBadgeComplete]}>
            <Ionicons name="flag" size={14} color={goldColor} />
            <Text style={[styles.compactText, styles.compactTextComplete]}>
              Compliance Complete
            </Text>
          </View>
        ) : (
          <View style={styles.compactSteps}>
            {complianceSteps.map((step, index) => {
              const isCompleted = status[step.key];
              return (
                <View 
                  key={step.key} 
                  style={[
                    styles.compactStep,
                    isCompleted ? styles.compactStepComplete : styles.compactStepPending
                  ]}
                >
                  <Ionicons 
                    name={isCompleted ? 'checkmark' : step.icon} 
                    size={12} 
                    color={isCompleted ? colors.success : colors.gray400} 
                  />
                </View>
              );
            })}
            <Text style={styles.compactProgress}>{completedCount}/4</Text>
          </View>
        )}
      </View>
    );
  }

  // Full variant
  return (
    <View style={styles.container}>
      {/* Header */}
      <View style={styles.header}>
        <View style={styles.headerLeft}>
          <Ionicons 
            name={status.isComplete ? 'flag' : 'shield-checkmark-outline'} 
            size={20} 
            color={status.isComplete ? goldColor : colors.primary} 
          />
          <Text style={styles.headerTitle}>Compliance Status</Text>
        </View>
        <View style={[
          styles.progressBadge,
          status.isComplete && styles.progressBadgeComplete
        ]}>
          <Text style={[
            styles.progressText,
            status.isComplete && styles.progressTextComplete
          ]}>
            {status.isComplete ? 'Complete' : `${completedCount}/4`}
          </Text>
        </View>
      </View>

      {/* Complete Banner */}
      {status.isComplete && (
        <View style={styles.completeBanner}>
          <Ionicons name="flag" size={24} color={goldColor} />
          <View style={styles.completeBannerContent}>
            <Text style={styles.completeBannerTitle}>Compliance Trail Complete</Text>
            <Text style={styles.completeBannerSubtitle}>
              All documentation steps have been verified
            </Text>
          </View>
        </View>
      )}

      {/* Steps */}
      <View style={styles.stepsContainer}>
        {complianceSteps.map((step, index) => {
          const isCompleted = status[step.key];
          return (
            <View key={step.key} style={styles.stepRow}>
              <View style={[
                styles.stepIcon,
                isCompleted ? styles.stepIconComplete : styles.stepIconPending
              ]}>
                <Ionicons 
                  name={isCompleted ? 'checkmark' : step.icon} 
                  size={16} 
                  color={isCompleted ? colors.textInverse : colors.gray400} 
                />
              </View>
              {showLabels && (
                <View style={styles.stepContent}>
                  <Text style={[
                    styles.stepLabel,
                    isCompleted && styles.stepLabelComplete
                  ]}>
                    {step.label}
                  </Text>
                  <Text style={styles.stepStatus}>
                    {isCompleted ? 'Completed' : 'Pending'}
                  </Text>
                </View>
              )}
              {index < complianceSteps.length - 1 && (
                <View style={[
                  styles.stepConnector,
                  isCompleted && styles.stepConnectorComplete
                ]} />
              )}
            </View>
          );
        })}
      </View>
    </View>
  );
}

// Export a simple badge component for use in lists
export function ComplianceInlineBadge({ projectId }: { projectId: string }) {
  return <ComplianceStatusBadge projectId={projectId} variant="inline" />;
}

// Export a compact badge for cards
export function ComplianceCompactBadge({ projectId }: { projectId: string }) {
  return <ComplianceStatusBadge projectId={projectId} variant="compact" />;
}

const styles = StyleSheet.create({
  // Loading
  loadingContainer: {
    padding: spacing.xs,
  },

  // Inline variant
  inlineContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  inlineBadge: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.successLight,
    paddingVertical: 2,
    paddingHorizontal: spacing.xs,
    borderRadius: borderRadius.sm,
    gap: 4,
  },
  inlineBadgeComplete: {
    backgroundColor: goldLightColor,
  },
  inlineText: {
    ...typography.caption,
    fontWeight: '600',
    color: colors.success,
  },
  inlineTextComplete: {
    color: goldColor,
  },

  // Compact variant
  compactContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  compactBadge: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: goldLightColor,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.sm,
    borderRadius: borderRadius.full,
    gap: spacing.xs,
  },
  compactBadgeComplete: {
    borderWidth: 1,
    borderColor: goldColor + '40',
  },
  compactText: {
    ...typography.caption,
    fontWeight: '600',
    color: colors.textPrimary,
  },
  compactTextComplete: {
    color: goldColor,
  },
  compactSteps: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  compactStep: {
    width: 24,
    height: 24,
    borderRadius: 12,
    alignItems: 'center',
    justifyContent: 'center',
  },
  compactStepComplete: {
    backgroundColor: colors.successLight,
  },
  compactStepPending: {
    backgroundColor: colors.gray100,
  },
  compactProgress: {
    ...typography.caption,
    fontWeight: '600',
    color: colors.textSecondary,
    marginLeft: spacing.xs,
  },

  // Full variant
  container: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    ...shadows.sm,
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: spacing.md,
  },
  headerLeft: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: spacing.sm,
  },
  headerTitle: {
    ...typography.h3,
    color: colors.textPrimary,
  },
  progressBadge: {
    backgroundColor: colors.gray100,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.sm,
    borderRadius: borderRadius.full,
  },
  progressBadgeComplete: {
    backgroundColor: goldLightColor,
    borderWidth: 1,
    borderColor: goldColor + '40',
  },
  progressText: {
    ...typography.caption,
    fontWeight: '600',
    color: colors.textSecondary,
  },
  progressTextComplete: {
    color: goldColor,
  },

  // Complete banner
  completeBanner: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: goldLightColor,
    padding: spacing.md,
    borderRadius: borderRadius.lg,
    marginBottom: spacing.lg,
    borderWidth: 1,
    borderColor: goldColor + '30',
  },
  completeBannerContent: {
    marginLeft: spacing.md,
    flex: 1,
  },
  completeBannerTitle: {
    ...typography.body,
    fontWeight: '600',
    color: goldColor,
  },
  completeBannerSubtitle: {
    ...typography.caption,
    color: colors.textSecondary,
    marginTop: 2,
  },

  // Steps
  stepsContainer: {
    gap: spacing.md,
  },
  stepRow: {
    flexDirection: 'row',
    alignItems: 'center',
    position: 'relative',
  },
  stepIcon: {
    width: 32,
    height: 32,
    borderRadius: 16,
    alignItems: 'center',
    justifyContent: 'center',
  },
  stepIconComplete: {
    backgroundColor: colors.success,
  },
  stepIconPending: {
    backgroundColor: colors.gray100,
    borderWidth: 1,
    borderColor: colors.gray200,
  },
  stepContent: {
    marginLeft: spacing.md,
    flex: 1,
  },
  stepLabel: {
    ...typography.body,
    color: colors.textSecondary,
  },
  stepLabelComplete: {
    color: colors.textPrimary,
    fontWeight: '500',
  },
  stepStatus: {
    ...typography.caption,
    color: colors.textMuted,
    marginTop: 2,
  },
  stepConnector: {
    position: 'absolute',
    left: 15,
    top: 32,
    width: 2,
    height: spacing.md,
    backgroundColor: colors.gray200,
  },
  stepConnectorComplete: {
    backgroundColor: colors.success,
  },
});

